"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};webpackJsonp([0],[function(e,t,i){Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},i=Math.pow(2,53)-1;return function(e){var n=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var a,s=1<arguments.length?arguments[1]:void 0;if(void 0!==s){if(!t(s))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(a=arguments[2])}var r;r=Number(n.length),r=isNaN(r)?0:0!==r&&isFinite(r)?(0<r?1:-1)*Math.floor(Math.abs(r)):r,r=Math.min(Math.max(r,0),i);for(var o,l=t(this)?Object(new this(r)):Array(r),c=0;c<r;)o=n[c],l[c]=s?void 0===a?s(o,c):s.call(a,o,c):o,c+=1;return l.length=r,l}}());t.a=function(e,t){return"string"==typeof e?(t||document).querySelector(e):e||null};t.b=function(e,t){return Array.from("string"==typeof e?(t||document).querySelectorAll(e):e||null)}},function(e,t,i){function n(e,t){return void 0!==self.Promise&&self.Promise?new Promise(function(i,n){var a=document.createElement("script");a.src=e,a.async=!0,a.onload=function(e){i(a),t&&"function"==typeof t&&t(a)},a.onerror=n,document.body.appendChild(a)}):{then:function(t){return a(function(i){return n(e,t)})}}}function a(e){var t=document.createElement("script");t.src="/bower_components/es6-promise/promise.min.js",t.async=!0,t.onload=e,document.body.appendChild(t)}t.a=function(e){return JSON.parse(JSON.stringify(e))},t.b=function(e,t){var i=e;for(var n in t)i[n]=t[n];return i},t.c=function(){return void 0===window.scrollY?document.documentElement.scrollTop:window.scrollY},t.d=n,t.g=a,t.f=function(e){var t=document.createElement("script");t.src="/bower_components/fetch/fetch.min.js",t.async=!0,t.onload=e,document.body.appendChild(t)},t.e=function(e){return!window.matchMedia||window.matchMedia&&window.matchMedia(e).matches}},function(e,t,i){function n(e,t,i,s){var r,o;{if(e)return void 0!==self.Promise&&self.Promise?self.fetch?(t||(t={}),i&&"GET"===i?(o=a.b({"Content-Type":"text/plain"},t.headers||{}),r=a.b({method:"GET"},t),r.headers=o,fetch(e,r).then(function(e){return e.text()}).then(function(e){if(!s)return e;s(e)})):(o=a.b({Accept:"application/json","Content-type":"application/json"},t.headers||{}),r=a.b({url:e,body:"",method:"POST"},t),r.headers=o,r.body&&"string"!=typeof r.body&&r.body!=={}&&(r.body=JSON.stringify(r.body)),fetch(e,r).then(function(e){return e.json()}).then(function(e){if(!s)return e.d;s(JSON.parse(e.d))}).then(function(e){return JSON.parse(e)}))):{then:function(s){return a.f(function(a){return n(e,t,i,s)})}}:{then:function(s){return a.g(function(a){return n(e,t,i,s)})}};console.warn("No url provided to fetch")}}t.a=n;var a=i(1)},function(e,t,i){var n,a,s;!function(r){a=[i(4),i(5)],void 0===(s="function"==typeof(n=r)?n.apply(t,a):n)||(e.exports=s)}(function(e,t){function i(e){return null==e?e+"":"object"==(void 0===e?"undefined":_typeof(e))||"function"==typeof e?o[o.toString.call(e)]||"object":void 0===e?"undefined":_typeof(e)}function n(e){return null!=e&&e===e.window}function a(e){var t="length"in e&&e.length,a=i(e);return"function"!==a&&!n(e)&&(!(1!==e.nodeType||!t)||"array"===a||0===t||"number"==typeof t&&t>0&&t-1 in e)}function s(e){return e instanceof Element}function r(i){return i instanceof r?i:this instanceof r?void(void 0!==i&&null!==i&&i!==e&&(this[0]=i.nodeName?i:void 0!==i[0]&&i[0].nodeName?i[0]:t.querySelector(i),void 0!==this[0]&&null!==this[0]&&(this[0].eventRegistry=this[0].eventRegistry||{}))):new r(i)}for(var o={},l="Boolean Number String Function Array Date RegExp Object Error".split(" "),c=0;c<l.length;c++)o["[object "+l[c]+"]"]=l[c].toLowerCase();return r.prototype={on:function(e,t){if(s(this[0]))for(var i=this[0].eventRegistry,n=this[0],a=e.split(" "),r=0;r<a.length;r++){var o=a[r].split(".");!function(e,a){n.addEventListener?n.addEventListener(e,t,!1):n.attachEvent&&n.attachEvent("on"+e,t),i[e]=i[e]||{},i[e][a]=i[e][a]||[],i[e][a].push(t)}(o[0],o[1]||"global")}return this},off:function(e,t){if(s(this[0]))for(var i=this[0].eventRegistry,n=this[0],a=e.split(" "),r=0;r<a.length;r++)for(var o=a[r].split("."),l=function(e,n){var a,s,r=[];if(e.length>0)if(void 0===t)for(a=0,s=i[e][n].length;a<s;a++)r.push({ev:e,namespace:n&&n.length>0?n:"global",handler:i[e][n][a]});else r.push({ev:e,namespace:n&&n.length>0?n:"global",handler:t});else if(n.length>0)for(var o in i)for(var l in i[o])if(l===n)if(void 0===t)for(a=0,s=i[o][l].length;a<s;a++)r.push({ev:o,namespace:l,handler:i[o][l][a]});else r.push({ev:o,namespace:l,handler:t});return r}(o[0],o[1]),c=0,u=l.length;c<u;c++)!function(e,t,a){if(e in i==1)if(n.removeEventListener?n.removeEventListener(e,a,!1):n.detachEvent&&n.detachEvent("on"+e,a),"global"===t)for(var s in i[e])i[e][s].splice(i[e][s].indexOf(a),1);else i[e][t].splice(i[e][t].indexOf(a),1)}(l[c].ev,l[c].namespace,l[c].handler);return this},trigger:function(e){if(s(this[0]))for(var i=this[0].eventRegistry,n=this[0],a="string"==typeof e?e.split(" "):[e.type],o=0;o<a.length;o++){var l=a[o].split("."),c=l[0],u=l[1]||"global";if(void 0!==t&&"global"===u){var d,h,p={bubbles:!0,cancelable:!0,detail:Array.prototype.slice.call(arguments,1)};if(t.createEvent){try{d=new CustomEvent(c,p)}catch(e){(d=t.createEvent("CustomEvent")).initCustomEvent(c,p.bubbles,p.cancelable,p.detail)}e.type&&r.extend(d,e),n.dispatchEvent(d)}else(d=t.createEventObject()).eventType=c,e.type&&r.extend(d,e),n.fireEvent("on"+d.eventType,d)}else if(void 0!==i[c])if(arguments[0]=arguments[0].type?arguments[0]:r.Event(arguments[0]),"global"===u)for(var f in i[c])for(h=0;h<i[c][f].length;h++)i[c][f][h].apply(n,arguments);else for(h=0;h<i[c][u].length;h++)i[c][u][h].apply(n,arguments)}return this}},r.isFunction=function(e){return"function"===i(e)},r.noop=function(){},r.isArray=Array.isArray,r.inArray=function(e,t,i){return null==t?-1:function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1}(t,e)},r.valHooks=void 0,r.isPlainObject=function(e){return!("object"!==i(e)||e.nodeType||n(e)||e.constructor&&!o.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))},r.extend=function(){var e,t,i,n,a,s,o=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[l]||{},l++),"object"==(void 0===o?"undefined":_typeof(o))||r.isFunction(o)||(o={}),l===c&&(o=this,l--);l<c;l++)if(null!=(e=arguments[l]))for(t in e)i=o[t],o!==(n=e[t])&&(u&&n&&(r.isPlainObject(n)||(a=r.isArray(n)))?(a?(a=!1,s=i&&r.isArray(i)?i:[]):s=i&&r.isPlainObject(i)?i:{},o[t]=r.extend(u,s,n)):void 0!==n&&(o[t]=n));return o},r.each=function(e,t){var i=0;if(a(e))for(var n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},r.map=function(e,t){var i,n=0,s=e.length,r=[];if(a(e))for(;n<s;n++)null!=(i=t(e[n],n))&&r.push(i);else for(n in e)null!=(i=t(e[n],n))&&r.push(i);return[].concat(r)},r.data=function(e,t,i){if(void 0===i)return e.__data?e.__data[t]:null;e.__data=e.__data||{},e.__data[t]=i},"function"==typeof e.CustomEvent?r.Event=e.CustomEvent:(r.Event=function(e,i){i=i||{bubbles:!1,cancelable:!1,detail:void 0};var n=t.createEvent("CustomEvent");return n.initCustomEvent(e,i.bubbles,i.cancelable,i.detail),n},r.Event.prototype=e.Event.prototype),r})},function(e,t,i){var n;void 0===(n=function(){return window}.call(t,i,t,e))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(){return document}.call(t,i,t,e))||(e.exports=n)},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(2),s=i(7);!function(e){var t="00000000-0000-0000-0000-000000000000",i=-1,r=t,o=new s.a({labelItemText:"",labelItemsText:"",loadItems:{fn:"profilesGetJsonForAdmin",params:function(e){return{profileId:-1,userId:"",roleId:i,mlsId:"",mlsOfficeId:"",isActive:!1}},rowTmpl:'<div class="admin-grid-row{{rowClass}}" data-id="{{profileId}}"><div class="admin-grid-col admin-grid-col-primary">{{displayName}}</div><div class="admin-grid-col admin-grid-col-primary">{{role}}</div><div class="admin-grid-col admin-grid-col-primary">{{isActive}}</div><div class="admin-grid-col"><button class="btn btn-ripple btn-edit">Edit</button><button class="btn btn-ripple btn-delete">Delete</button></div></div>',rowTmplHeaders:["","Name","Role","Is Active"],rowTmplProps:["profileId","displayName","role","isActive"]},dragDropForOrder:!1,editItem:{fn:"profilesGetJsonForAdmin",params:{profileId:-1,userId:"",roleId:i,mlsId:"",mlsOfficeId:"",isActive:!1},itemId:"profileId",callback:function(e){var t,i,n;return Promise.resolve().then(function(){return Promise.resolve().then(function(){return c.value=e.pwd,o.formEdit.checkActiveInputs(),r=e.userId,Object(a.a)("/api/membership/rolesGetJson",{body:{roleId:-1,role:"",userId:r}})}).then(function(e){(t=e).success?1===(i=t.obj).length&&(n=i[0],u.Select.setValue(n.roleId)):console.log("Error loading user role "+t.msg)}).catch(function(e){console.log("Error loading user role "+e)})}).then(function(){})}},saveItem:{fn:"profileSave",itemId:"profileId",sendAsString:!0,updateSortOrderFn:"",callback:function(e){var t,i;return Promise.resolve().then(function(){return Promise.resolve().then(function(){return t=parseInt(u.Select.getValue()),Object(a.a)("/api/membership/userAssignRoleByProfile",{body:{profileId:o.itemId,roleId:t}})}).then(function(t){(i=t).success?e&&"function"==typeof e&&e():console.log("Error saving user role - "+i.msg)}).catch(function(e){console.log("Error saving user role - "+e)})}).then(function(){})}},deleteItem:{fn:"profileDelete",itemId:"profileId"},back:{fn:function(){r=t}},additionalProperties:{userId:t,profilePic:""}}),l=Object(n.a)("#ddl-filter-role"),c=Object(n.a)("#tb-pwd-confirm"),u=Object(n.a)("#ddl-role");l.Select.setChangeEvent(function(e){-999===(i=parseInt(l.Select.getValue()))&&(i=-1),o.loadItems()})}(document)},function(e,t,i){var n=i(0),a=i(2),s=i(1),r=i(8),o=i(10),l=i(11),c={btnBack:"btn-back",btnDelete:"btn-delete",btnNew:"btn-new",btnSave:"btn-save",formGrid:"form-grid",formEdit:"form-edit",gridContainerId:"grid-container",gridRowClass:"admin-grid-row",hiddenClass:"hidden",lblItem:"lbl-item",lblItems:"lbl-items",wsUrl:"/api/"},u=new o.a,d=new r.a,h=window.location.pathname,p=function(){function e(t){_classCallCheck(this,e),this.options=t,this.labelItemText=t.labelItemText,this.labelItemsText=t.labelItemsText,this.wsUrl=t.wsPath,this.wsUrl&&(c.wsUrl=this.wsUrl),this.initItemFn=t.initItem?t.initItem.callback:null,this.loadItemsFn=t.loadItems.fn,this.loadItemsParams=t.loadItems.params,this.loadItemsRowHTML=t.loadItems.rowTmpl,this.loadItemsRowHeaders=t.loadItems.rowTmplHeaders,this.loadItemsRowProps=t.loadItems.rowTmplProps,this.editItemFn=t.editItem.fn,this.editItemParams=t.editItem.params,this.editItemItemId=t.editItem.itemId,this.editItemCallback=t.editItem.callback,this.saveItemFn=t.saveItem.fn,this.saveItemId=t.saveItem.itemId,this.saveItemIsGuid=t.saveItem.isGuid||!1,this.sendAsString=t.saveItem.sendAsString||!1,this.saveCallback=t.saveItem.callback,this.updateSortOrderFn=t.saveItem.updateSortOrderFn,this.deleteItemFn=t.deleteItem.fn,this.deleteItemItemId=t.deleteItem.itemId,this.backToGridCallback=t.back.fn,this.items=[],this.formGrid=new l.a(Object(n.a)("#"+c.formGrid)),this.formEdit=new l.a(Object(n.a)("#"+c.formEdit)),this.dragDropForOrder=t.dragDropForOrder||!1,this.btnNew=Object(n.a)("#"+c.btnNew),this.btnBack=Object(n.a)("#"+c.btnBack),this.btnDelete=Object(n.a)("#"+c.btnDelete),this.btnSave=Object(n.a)("#"+c.btnSave),this.itemId=-1,this.additionadditionalPropertiesDefault=s.a(t.additionalProperties||{}),this.additionalProperties=s.a(t.additionalProperties||{}),this.setLabels=this.setLabels.bind(this),this.loadItems=this.loadItems.bind(this),this.buildGrid=this.buildGrid.bind(this),this.initNewItem=this.initNewItem.bind(this),this.editData=this.editData.bind(this),this.saveItem=this.saveItem.bind(this),this.backToGrid=this.backToGrid.bind(this),this.btnDeleteClickHandler=this.btnDeleteClickHandler.bind(this),this.deleteItem=this.deleteItem.bind(this),this.popstateHanlder=this.popstateHanlder.bind(this),this.setLabels(),this.addEventListeners(),this.loadItems()}return _createClass(e,[{key:"setLabels",value:function(){var e=this;Object(n.b)("."+c.lblItem).forEach(function(t){return t.textContent=e.labelItemText}),Object(n.b)("."+c.lblItems).forEach(function(t){return t.textContent=e.labelItemsText})}},{key:"addEventListeners",value:function(){this.btnNew.addEventListener("click",this.initNewItem,!1),this.btnBack.addEventListener("click",this.backToGrid,!1),this.btnSave.addEventListener("click",this.saveItem,!1),this.btnDelete.addEventListener("click",this.btnDeleteClickHandler,!1),window.addEventListener("popstate",this.popstateHanlder,!1)}},{key:"loadItems",value:function(){var e,t,i=this;return Promise.resolve().then(function(){return Promise.resolve().then(function(){return e={},e="function"==typeof i.loadItemsParams?i.loadItemsParams():i.loadItemsParams,Object(a.a)(c.wsUrl+i.loadItemsFn,{body:e})}).then(function(e){(t=e).success?(i.items=t.obj,"string"===_typeof(i.items).toLowerCase()&&(i.items=JSON.parse(i.items)),i.buildGrid()):console.log("Error loading items: "+t.msg)}).catch(function(e){console.log("Error loading items: "+e)})}).then(function(){})}},{key:"buildGrid",value:function(){var e=this,t="",i="";i=this.loadItemsRowHTML;for(var a=0;a<this.loadItemsRowHeaders.length;a++){var s=this.loadItemsRowHeaders[a],r=this.loadItemsRowProps[a];i=i.replace("{{"+r+"}}",s)}t+=i=i.replace("{{rowClass}}"," hdr");for(var o=0;o<this.items.length;o++){var l=this.items[o];i=this.loadItemsRowHTML.replace("{{rowClass}}","");for(var u=0;u<this.loadItemsRowProps.length;u++){var d=this.loadItemsRowProps[u],h=l[d];"active"===d||"isActive"===d?h=!0===h?"Active":"Not Active":"isFeatured"===d?h=!0===h?"Yes":"No":"isAdmin"===d&&(h=!0===h?"Yes":"No"),i=i.replace("{{"+d+"}}",h)}t+=i}Object(n.a)("#"+c.gridContainerId).innerHTML=t,requestAnimationFrame(function(t){e.initRows().then(function(t){e.dragDropForOrder&&e.rows.length&&e.initDragDrop()})})}},{key:"initRows",value:function(){var e=this;return new Promise(function(t,i){var a=e;e.rows=[],Object(n.b)("."+c.gridRowClass).forEach(function(t){return e.rows.push(new f(t,a))}),t()})}},{key:"initDragDrop",value:function(){var e=this;dragula([Object(n.a)("#"+c.gridContainerId)],{isContainer:function(e){return!1},moves:function(e,t,i,n){return i.classList.contains("btn-reorder")},accepts:function(e,t,i,n){return!0},invalid:function(e,t){return!1},direction:"vertical",copy:!1,copySortSource:!1,revertOnSpill:!1,removeOnSpill:!1,mirrorContainer:document.body,ignoreInputTextSelect:!0}).on("drop",function(t,i,s,r){var o=parseInt(t.getAttribute("data-id"),10),l=Object(n.b)(".admin-grid-row:not(.hdr)").map(function(e){return parseInt(e.getAttribute("data-id"),10)}).findIndex(function(e){return e===o});Object(a.a)(c.wsUrl+e.updateSortOrderFn,{body:{id:o,sortOrder:l+1}}).then(function(e){e.success&&u.show("Display order updated.")})})}},{key:"initNewItem",value:function(){this.itemId=-1,this.formEdit.container.querySelector("#tb-sort-order")&&(this.formEdit.container.querySelector("#tb-sort-order").value=this.items.length+1),this.formGrid.hide(),this.formEdit.show(),this.btnDelete.classList.add(c.hiddenClass),this.initItemFn&&"function"==typeof this.initItemFn&&this.initItemFn(),history.pushState({page:"edit"},"Edit","?edit")}},{key:"editData",value:function(e){var t=this;u.show("Loading item details...",-1),this.itemId=e,this.editItemParams[this.editItemItemId]=this.itemId,Object(a.a)(c.wsUrl+this.editItemFn,{body:this.editItemParams}).then(function(e){var i=void 0;e.success&&e.obj.length&&(i=e.obj[0],t.formEdit.setFieldValues(i),t.formEdit.show(),t.formGrid.hide(),t.btnDelete.classList.remove(c.hiddenClass),t.additionalProperties&&Object.getOwnPropertyNames(t.additionalProperties).forEach(function(e){t.additionalProperties[e]=i[e]}),window.scrollTo(0,0),u.hide(!0),t.editItemCallback&&"function"==typeof t.editItemCallback&&t.editItemCallback(i),history.pushState({page:"edit"},"Edit","?edit"))}).catch(function(e){console.log(e)})}},{key:"saveItem",value:function(){var e=this,t=this,i={};this.formEdit.validateFields()?(u.show("Saving data, please wait..."),i=this.formEdit.collectData(),this.additionalProperties&&Object.getOwnPropertyNames(this.additionalProperties).forEach(function(t){i[t]=e.additionalProperties[t]}),i[this.saveItemId]=this.itemId,this.saveItemIsGuid&&-1===this.itemId&&(i[this.saveItemId]="00000000-0000-0000-0000-000000000000"),this.sendAsString&&(i={data:JSON.stringify(i)}),Object(a.a)(c.wsUrl+this.saveItemFn,{body:i}).then(function(i){i.success?(u.show("Data saved successfully.",2e3),-1===e.itemId&&(e.itemId=i.obj),e.saveCallback&&"function"==typeof e.saveCallback?e.saveCallback(function(e){t.loadItems(),t.backToGrid()}):(t.loadItems(),setTimeout(function(e){return t.backToGrid()},1500))):(u.show("Unable to save at this time, please try again. "+i.msg,-1),console.log("Error:",i.msg||"No error data."))}).catch(function(e){u.show("Unable to save at this time, please try again.",-1),console.log("Error:",e||"No error data.")})):u.show("Fields marked with * are required.")}},{key:"backToGrid",value:function(){var e=this;this.formEdit.hide(),this.formEdit.clearForm(),this.formGrid.show(),this.itemId=-1,this.additionalProperties&&Object.getOwnPropertyNames(this.additionalProperties).forEach(function(t){e.additionalProperties[t]=e.additionadditionalPropertiesDefault[t]}),this.backToGridCallback&&"function"==typeof this.backToGridCallback&&this.backToGridCallback(),window.scrollTo(0,0),history.pushState({page:""},"Options",h),this.formEdit.clearForm()}},{key:"btnDeleteClickHandler",value:function(){this.deleteItem(this.itemId)}},{key:"deleteItem",value:function(e){var t=this,i=this,n={};n[this.deleteItemItemId]=e,d.promptAlert("Confirm Delete","<p>Are you sure you want to delete this item?","Delete","Cancel",function(e){d.dismissAlert(),u.show("Deleting item..."),Object(a.a)(c.wsUrl+t.deleteItemFn,{body:n}).then(function(e){e.success?(u.show("Item successfully deleted.",2500),i.loadItems(),setTimeout(function(e){return i.backToGrid()},1e3)):(u.show("Unable to delete at this time. Please try again."),console.log("Error:",e.msg||"No error data"))}).catch(function(e){u.show("Unable to delete at this time. Please try again."),console.log("Error:",e||"No error data")}),e.preventDefault()},function(e){d.dismissAlert(),e.preventDefault()})}},{key:"setAdditionalPropertyData",value:function(e,t){this.additionalProperties[e]=t}},{key:"getAdditionalPropertyData",value:function(e){return this.additionalProperties[e]}},{key:"popstateHanlder",value:function(e){e.state&&""!==e.state.page||this.backToGrid()}},{key:"uploadHelper",value:function(e,t,i,n,a){var s=e.name,r=e.type,o=new FileReader;!t||/^image\//.test(r)?(u.show("Uploading file, please wait...",-1),o.onload=function(t){var o=new XMLHttpRequest;o.open("post",i,!0),o.setRequestHeader("X-File-Name",s),o.setRequestHeader("X-File-Size",e.size),o.setRequestHeader("X-File-Type",r);for(var l in n)o.setRequestHeader(l,n[l]);o.addEventListener("load",function(e){if(e.target.response){var t=JSON.parse(e.target.response);t.success?(u.show("The file was successfully uploaded."),setTimeout(function(e){u.hide(!0)},1e3),a&&"function"==typeof a&&a(t.obj)):(u.show("Unable to upload the file, please try again.",-1),console.log("Error:",t.msg||"No error data."))}},!1),o.send(e)},o.readAsDataURL(e)):u.show("Only .jpg, .jpeg, and .png files are allowed.",-1)}}]),e}();t.a=p;var f=function(){function e(t,i){_classCallCheck(this,e),this.container=t,this.AdminForm=i,this.id=t.getAttribute("data-id"),this.btnEdit=t.querySelector(".btn-edit"),this.btnDelete=t.querySelector(".btn-delete"),this.btnDrag=t.querySelector(".btn-reorder"),this.dragOver=!1,this.editItem=this.editItem.bind(this),this.deleteItem=this.deleteItem.bind(this),this.addEventListeners()}return _createClass(e,[{key:"addEventListeners",value:function(){this.btnEdit.addEventListener("click",this.editItem,!1),this.btnDelete.addEventListener("click",this.deleteItem,!1)}},{key:"editItem",value:function(){this.AdminForm.editData(this.id)}},{key:"deleteItem",value:function(){this.AdminForm.deleteItem(this.id)}},{key:"setId",value:function(){this.id=this.container.getAttribute("data-id")}}]),e}()},function(e,t,i){i(9);var n="alert",a=function(){function e(){_classCallCheck(this,e),this.root_=document.body,this.container=this._createAlertElements(),this.root_.appendChild(this.container),this.onConfirm=function(){},this.onDismiss=function(){},this.addEventListeners(),this}return _createClass(e,null,[{key:"cssClasses",get:function(){return{ROOT:n,ALERT_ACTIVE:"alert-is-active",ALERT_EL:"alert-el",ALERT_HDR:"alert-header",ALERT_INFO:"alert-info",BTN:"alert-btn",BTN_CONFIRM:"alert-btn-confirm",BTN_CONTAINER:"alert-btn-container",BTN_DISMISS:"alert-btn-dismiss,",CONTAINER:"alert-container"}}},{key:"numbers",get:function(){return{ESCAPE_KEY:27}}}]),_createClass(e,[{key:"_createAlertElements",value:function(){var t=document.createElement("div");return t.classList.add(e.cssClasses.CONTAINER),this.alertEl=document.createElement("div"),this.alertEl.classList.add(e.cssClasses.ALERT_EL),this.alertHeader=document.createElement("h3"),this.alertHeader.classList.add(e.cssClasses.ALERT_HDR),this.alertInfo=document.createElement("div"),this.alertInfo.classList.add(e.cssClasses.ALERT_INFO),this.btnContainer=document.createElement("div"),this.btnContainer.classList.add(e.cssClasses.BTN_CONTAINER),this.btnDismiss=document.createElement("button"),this.btnDismiss.classList.add(e.cssClasses.BTN),this.btnDismiss.classList.add(e.cssClasses.BTN_DISMISS),this.btnDismiss.classList.add("btn-ripple"),this.btnDismiss.textContent="Dismiss",this.btnConfirm=document.createElement("button"),this.btnConfirm.classList.add(e.cssClasses.BTN),this.btnConfirm.classList.add(e.cssClasses.BTN_CONFIRM),this.btnConfirm.classList.add("btn-ripple"),this.btnConfirm.textContent="Confirm",this.btnContainer.appendChild(this.btnDismiss),this.btnContainer.appendChild(this.btnConfirm),this.alertEl.appendChild(this.alertHeader),this.alertEl.appendChild(this.alertInfo),this.alertEl.appendChild(this.btnContainer),t.appendChild(this.alertEl),t}},{key:"addEventListeners",value:function(){this.btnConfirm.addEventListener("click",this.onConfirm,!1),this.btnDismiss.addEventListener("click",this.onDismiss,!1)}},{key:"promptAlert",value:function(e,t,i,n,a,s){this.alertHeader.textContent=e,this.alertInfo.innerHTML=t,this.updateButtons(i,n,a,s),this.showAlert(),document.body.addEventListener("keydown",this.handleKeyDown,!1)}},{key:"updateButtons",value:function(e,t,i,n){this.btnConfirm.textContent=e,this.btnDismiss.textContent=t,this.btnConfirm.removeEventListener("click",this.onConfirm,!1),this.btnDismiss.removeEventListener("click",this.onDismiss,!1),this.onConfirm=i,this.onDismiss=n,this.btnConfirm.addEventListener("click",this.onConfirm,!1),this.btnDismiss.addEventListener("click",this.onDismiss,!1)}},{key:"showAlert",value:function(){document.body.classList.add(e.cssClasses.ALERT_ACTIVE)}},{key:"handleKeyDown",value:function(t){t.keyCode===e.numbers.ESCAPE_KEY&&this.onDismiss()}},{key:"dismissAlert",value:function(){document.body.classList.remove(e.cssClasses.ALERT_ACTIVE),document.body.removeEventListener("keydown",this.handleKeyPress,!1)}}]),e}();t.a=a},function(e,t,i){i(0);var n=function(e){this.element_=e,this.init()};n.prototype.cssClasses_={RIPPLE_BUTTON:"btn-ripple",RIPPLE_CONTAINER:"btn-ripple-container",RIPPLE:"btn-ripple-element",RIPPLE_CENTER:"btn-ripple-center",RIPPLE_IS_ANIMATING:"is-animating",RIPPLE_IS_VISIBLE:"is-visible"},n.prototype.RippleConstant={INITIAL_SCALE:"scale(0.0001, 0.0001)",INITIAL_SIZE:"1px",INITIAL_OPACITY:"0.4",FINAL_OPACITY:"0",FINAL_SCALE:""},n.prototype.init=function(){this.element_&&this.element_.classList.contains(this.cssClasses_.RIPPLE_BUTTON)&&this.initRipple()},n.prototype.initRipple=function(){var e;this.addRippleElements(),e=this.element_.classList.contains(this.cssClasses_.RIPPLE_CENTER),this.frameCount_=0,this.rippleSize_=0,this.x_=0,this.y_=0,this.ignoringMouseDown_=!1,this.boundDownHandler=this.downHandler_.bind(this),this.element_.addEventListener("mousedown",this.boundDownHandler,!1),this.element_.addEventListener("touchstart",this.boundDownHandler,!1),this.boundUpHandler=this.upHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundUpHandler,!1),this.element_.addEventListener("mouseleave",this.boundUpHandler,!1),this.element_.addEventListener("touchend",this.boundUpHandler,!1),this.element_.addEventListener("blur",this.boundUpHandler,!1),this.getFrameCount=function(){return this.frameCount_},this.setFrameCount=function(e){this.frameCount_=e},this.getRippleElement=function(){return this.rippleElement_},this.setRippleXY=function(e,t){this.x_=e,this.y_=t},this.setRippleStyles=function(t){if(null!==this.rippleElement_){var i,n,a="translate("+this.x_+"px, "+this.y_+"px)";t?(n=this.RippleConstant.INITIAL_SCALE,this.RippleConstant.INITIAL_SIZE):(n=this.RippleConstant.FINAL_SCALE,this.rippleSize_+"px",e&&(a="translate("+this.boundWidth/2+"px, "+this.boundHeight/2+"px)")),i="translate(-50%, -50%) "+a+n,this.rippleElement_.style.webkitTransform=i,this.rippleElement_.style.msTransform=i,this.rippleElement_.style.transform=i,t?this.rippleElement_.classList.remove(this.cssClasses_.RIPPLE_IS_ANIMATING):this.rippleElement_.classList.add(this.cssClasses_.RIPPLE_IS_ANIMATING)}},this.animFrameHandler=function(){this.frameCount_-- >0?requestAnimationFrame(this.animFrameHandler.bind(this)):this.setRippleStyles(!1)}},n.prototype.addRippleElements=function(){var e=document.createElement("span");e.classList.add(this.cssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.cssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)},n.prototype.blurHandler_=function(e){e&&this.element_.blur()},n.prototype.disable=function(){this.element_.disabled=!0},n.prototype.downHandler_=function(e){var t,i,n,a,s;if(!this.rippleElement_.style.width&&!this.rippleElement_.style.height){var r=this.element_.getBoundingClientRect();this.boundHeight=r.height,this.boundWidth=r.width,this.rippleSize_=2*Math.sqrt(r.width*r.width+r.height*r.height)+2,this.rippleElement_.style.width=this.rippleSize_+"px",this.rippleElement_.style.height=this.rippleSize_+"px"}if(this.rippleElement_.classList.add(this.cssClasses_.RIPPLE_IS_VISIBLE),"mousedown"===e.type&&this.ignoringMouseDown_)this.ignoringMouseDown_=!1;else{"touchstart"===e.type&&(this.ignoringMouseDown_=!0);if(this.getFrameCount()>0)return;this.setFrameCount(1),t=e.currentTarget.getBoundingClientRect(),0===e.clientX&&0===e.clientY?(i=Math.round(t.width/2),n=Math.round(t.height/2)):(a=e.clientX?e.clientX:e.touches[0].clientX,s=e.clientY?e.clientY:e.touches[0].clientY,i=Math.round(a-t.left),n=Math.round(s-t.top)),this.setRippleXY(i,n),this.setRippleStyles(!0),window.requestAnimationFrame(this.animFrameHandler.bind(this))}},n.prototype.upHandler_=function(e){e&&2!==e.detail&&this.rippleElement_.classList.remove(this.cssClasses_.RIPPLE_IS_VISIBLE),window.setTimeout(function(){this.rippleElement_.classList.remove(this.cssClasses_.RIPPLE_IS_VISIBLE)}.bind(this),0)},n.prototype.enable=function(){this.element_.disabled=!1}},function(e,t,i){var n=function(){function e(t){_classCallCheck(this,e),this.root_=document.body,this.container=this._createToast()}return _createClass(e,null,[{key:"cssClasses",get:function(){return{ROOT:"toast",VISIBLE:"toast-is-visible"}}},{key:"numbers",get:function(){return{DEFAULT_DURATION:3e3}}}]),_createClass(e,[{key:"show",value:function(t,i){var n=this;this.removeToasts(),this.container.textContent=t,this.container.classList.add(e.cssClasses.VISIBLE),this.root_.appendChild(this.container),i||-1===i||(i=e.numbers.DEFAULT_DURATION),-1!==i&&setTimeout(function(e){return n.hide()},i)}},{key:"_createToast",value:function(){var t=document.createElement("div");return t.classList.add(e.cssClasses.ROOT),t}},{key:"hide",value:function(){this.container.classList.remove(e.cssClasses.VISIBLE)}},{key:"removeToasts",value:function(){var t=document.querySelector("."+e.cssClasses.ROOT);t&&t.parentNode.removeChild(t)}}]),e}();t.a=n},function(e,t,i){var n=i(0),a=i(1),s=i(12),r=i(15),o={allowedContent:!0,height:350,toolbar:"Simple"},l={placeholder:{text:""},toolbar:{buttons:["bold","italic","underline","anchor","h2","h3","unorderedlist","orderedlist"]},anchor:{targetCheckbox:!0,targetCheckboxText:"Open in New Tab?"}},c={chosenSelect:"chosen-select",ckeditor:"use-ckeditor",errorLabel:"error-label",hidden:"hidden",inputField:"input-field",invalid:"invalid",mediumEditor:"use-medium-editor",quillEditor:"use-quill-editor",required:"req"},u=function(){function e(t,i){_classCallCheck(this,e),"string"==typeof t&&(t=Object(n.a)(t)),this.container=t,this.editorOptions=i,this.fields=Object(n.b)('input:not([type="file"]),textarea,.use-medium-editor,select',t),this.reqFields=Object(n.b)("."+c.required,t),this.inputFields=Object(n.b)("."+c.inputField+",.text-editor",t),this.initFormElements=this.initFormElements.bind(this),this.initEditors=this.initEditors.bind(this),this.checkActiveInputs=this.checkActiveInputs.bind(this),this.validateFields=this.validateFields.bind(this),this.collectData=this.collectData.bind(this),this.setFieldValues=this.setFieldValues.bind(this),this.clearForm=this.clearForm.bind(this),this.initFormElements(),this.initEditors()}return _createClass(e,[{key:"initFormElements",value:function(){var e=this;this.inputFields.forEach(function(e){var t=e.querySelector("select"),i=e.querySelector("input");if(t&&!t.Select&&(t.Select=new r.a(t)),i||(i=e.querySelector("textarea")),i||(i=e.querySelector("."+c.mediumEditor)),i){i.tagName.toLowerCase();var n=i.type?i.type.toLowerCase():"";if(!i.TextBox&&"checkbox"!==n&&"radio"!==n){var a=!1,o=!1,l=!1;i.classList.contains(c.ckeditor)?a=!0:i.classList.contains(c.mediumEditor)?o=!0:i.classList.contains(c.quillEditor)&&(l=!0),i.TextBox=new s.a(i,a,o,l)}}}),this.fields.forEach(function(t){t.classList.contains("input-date")&&!t.isUpgraded&&e.initDatePicker(t)})}},{key:"initDatePicker",value:function(e){if(e.type="text","ontouchstart"in document.documentElement&&a.e("(max-width:1024px)"))e.type="date";else{var t=function(t){if(!e.isUpgraded){new Pikaday({field:e,format:"MM/DD/YYYY",onSelect:function(){e.value=this.getMoment().format("MM/DD/YYYY")}});e.isUpgraded=!0}};void 0!==self.Pikaday&&self.Pikaday?t():a.d("/js/app/libs/moment.js").then(function(e){return a.d("/js/app/libs/pikaday.js")}).then(function(e){return t()})}}},{key:"initEditors",value:function(){var e=this;this.fields.forEach(function(t){t.classList.contains(c.mediumEditor)?window.MediumEditor?new MediumEditor(t,e.editorOptions||l):console.warn("MediumEditor source not found. Unable to use MediumEditor."):t.classList.contains(c.ckeditor)&&(window.CKEDITOR?(CKEDITOR.replace(t.id,e.editorOptions||o),t.classList.contains("ckfinder")&&CKFinder.setupCKEditor(CKEDITOR.instances[t.id],"/ckfinder/")):console.warn("CKEDITOR source not found. Unable to use CKEDITOR"))})}},{key:"checkActiveInputs",value:function(){this.inputFields.forEach(function(e){var t=e.querySelector("label"),i=e.querySelector("select"),n=e.querySelector("input");t&&t.classList.remove("active"),i&&i.Select&&i.Select.checkForValue(),n||(n=e.querySelector("textarea")),n||(n=e.querySelector("."+c.mediumEditor)),n&&n.TextBox&&n.TextBox.checkForValue()})}},{key:"validateFields",value:function(){var e=!0;return this.fields.forEach(function(t){var i=!0,n="",a=t.tagName.toLowerCase();t.classList.contains(c.mediumEditor)?(n=t.innerText.trim(),t.TextBox?i=t.TextBox.validateField():t.classList.contains("req")&&""===n&&(i=!1)):t.classList.contains(c.ckeditor)?t.TextBox?i=t.TextBox.validateField():(n=CKEDITOR.instances[t.id].getData().trim(),t.classList.contains("req")&&""===n&&(i=!1)):"select"===a?t.Select?(n=t.Select.getValue(),i=t.Select.checkIfRequired()):t.classList.contains(c.chosenSelect)||(n=t.options[t.selectedIndex].value,!t.classList.contains("req")||""!==n&&"-1"!==n||(i=!1)):t.TextBox&&t.classList.contains("req")?i=t.TextBox.validateField():(n=t.value.trim(),t.classList.contains("req")&&""===n&&(i=!1)),e&&!i&&(e=!1),i||console.log("Invalid Field: ",t)}),e}},{key:"collectData",value:function(){var e={};return this.fields.forEach(function(t){var i=t.getAttribute("name"),n="",a=t.tagName.toLowerCase(),s=t.type?t.type.toLowerCase():"";"checkbox"===s?n=t.checked:"radio "===s?t.checked?n=t.value:i=null:t.classList.contains(c.mediumEditor)?n=t.innerHTML:t.classList.contains(c.ckeditor)?n=CKEDITOR.instances[t.id].getData().trim():"select"===a?t.Select?n=t.Select.getValue():t.classList.contains(c.chosenSelect)||(n=t.options[t.selectedIndex].value):(n=t.value.trim(),t.classList.contains("integer")?n=parseInt(n,10):t.classList.contains("decimal")&&(""===n&&(n=-1),n=parseFloat(n))),null!==i&&(e[i]=n)}),e}},{key:"setFieldValues",value:function(e){this.fields.forEach(function(t){var i=e[t.getAttribute("name")],n=t.type?t.type.toLowerCase():"",a=t.tagName.toLowerCase();i?"checkbox"===n?t.checked=i:t.classList.contains(c.mediumEditor)?t.innerHTML=i:t.classList.contains(c.ckeditor)?i=CKEDITOR.instances[t.id].setData(i):"select"===a&&t.Select?t.Select.setValue(i):(t.classList.contains("input-date")&&(i=e[t.getAttribute("name")+"Str"]?e[t.getAttribute("name")+"Str"]:moment(i).format("MM/DD/YYYY")),t.value=i):console.warn("Property does not exist for key "+t.getAttribute("name"))}),this.checkActiveInputs()}},{key:"clearForm",value:function(){this.fields.forEach(function(e){var t=e.parentNode.querySelector("."+c.errorLabel),i=e.type?e.type.toLowerCase():"",a=e.tagName.toLowerCase();"checkbox"===i?e.checked=!1:e.classList.contains(c.mediumEditor)?e.innerHTML="":"textarea"===a?e.classList.contains(c.ckeditor)?CKEDITOR.instances[e.id].setData(""):e.value="":"select"===a?e.Select?e.Select.setValue("-1"):e.multiple&&e.classList.contains(c.chosenSelect)?(Object(n.b)("option",e).forEach(function(e){return e.selected=!1}),jQuery(e).trigger("chosen:updated")):e.value="-1":e.value="",e.classList.remove(c.invalid),t&&e.parentNode.removeChild(t)}),Object(n.b)(".row-preview",this.container).forEach(function(e){return e.innerHTML=""}),Object(n.b)(".btn-item-upload-delete",this.container).forEach(function(e){return e.classList.add("hidden")}),this.checkActiveInputs()}},{key:"hide",value:function(){this.container.classList.add(c.hidden)}},{key:"show",value:function(){this.checkActiveInputs(),this.container.classList.remove(c.hidden)}}]),e}();t.a=u},function(e,t,i){var n=i(1),a=i(13),s=i.n(a),r={ACTIVE_FIELD_CLASS:"active",DATE_SELECTOR:"input-date",ERROR_LABEL:"error-label",INVALID_REQ_FIELD:"invalid",REQUIRED_FIELD:"req"},o=[{type:"req",regExp:/^(?!\s*$).+/,msg:"Required Field"},{type:"email",regExp:/[A-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[A-Z0-9](?:[A-Z0-9-]*[A-Z0-9])?\.)+[A-Z0-9](?:[A-Z0-9-]*[A-Z0-9])?/i,msg:"Invalid Email Address"},{type:"tel",regExp:/^$|\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,msg:"Invalid Phone Number"},{type:"input-date",regExp:/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/,msg:"Invalid Date"},{type:"zip",regExp:/^$|\d{5}(?:[-\s]\d{4})?$/,msg:"Invalid Zipcode"},{type:"numonly",regExp:/[0-9]$/,msg:"Numbers Only"},{type:"currency",regExp:/^\d+(\.\d{1,2})?$/i,msg:"Number or decimal only"}],l=function(){function e(t,i,n,a){_classCallCheck(this,e),this.input=t,this.container=t.parentNode,this.label=this.container.querySelector("label"),this.isCKEditor=i,this.isMediumEditor=n,this.isQuillEditor=a,this.input.classList.contains(r.DATE_SELECTOR)&&this.initDatePicker(),this.checkForValue(),this.initDatePicker=this.initDatePicker.bind(this),this.focusHandler=this.focusHandler.bind(this),this.blurHandler=this.blurHandler.bind(this),this.validateField=this.validateField.bind(this),this.checkForValue=this.checkForValue.bind(this),this.setValue=this.setValue.bind(this),this.getValue=this.getValue.bind(this),this.addEventListeners(),this.inputMaskSetup()}return _createClass(e,[{key:"addEventListeners",value:function(){if(this.input.addEventListener("focus",this.focusHandler,!1),this.input.addEventListener("blur",this.blurHandler,!1),this.input.addEventListener("change",this.checkForValue,!1),this.input.classList.contains("currency")){new s.a({alias:"currency",autoUnmask:!0,clearMaskOnLostFocus:!0}).mask(this.input),"N"===this.input.getAttribute("data-sumtype")&&this.input.parentNode.classList.add("input-neg-num")}}},{key:"inputMaskSetup",value:function(){var e=this.input.getAttribute("data-mask");if(null!==e&&""!==e){new s.a({alias:e,autoUnmask:!0,clearMaskOnLostFocus:!0}).mask(this.input)}}},{key:"initDatePicker",value:function(){var e=this.input;if(e.type="text","ontouchstart"in document.documentElement&&n.e("(max-width:1024px)"))e.type="date";else{var t=function(t){if(!e.isUpgraded){new Pikaday({field:e,format:"MM/DD/YYYY",onSelect:function(){e.value=this.getMoment().format("MM/DD/YYYY")}});e.isUpgraded=!0}};void 0!==self.Pikaday&&self.Pikaday?t():n.d("/js/app/libs/moment.js").then(function(e){return n.d("/js/app/libs/pikaday.js")}).then(function(e){return t()})}}},{key:"focusHandler",value:function(){this.label&&this.label.classList.add(r.ACTIVE_FIELD_CLASS)}},{key:"blurHandler",value:function(){this.checkForValue(),this.validateField()}},{key:"checkForValue",value:function(){this.label&&(""!==this.getValue()?this.label.classList.add(r.ACTIVE_FIELD_CLASS):this.label.classList.remove(r.ACTIVE_FIELD_CLASS))}},{key:"validateField",value:function(e){var t=this.input,i=t.type?t.type.toLowerCase():"",n=!0,a=this.getValue(),s=t.getAttribute("min-chars"),l=t.getAttribute("compare-with"),c=this.container.querySelector("."+r.ERROR_LABEL),u=void 0,d="",h=!1;if(s&&a.length<parseInt(s,10))n=!1,d=s+" characters required.",h=!0;else if(l){var p=document.getElementById(l);p.value!==t.value?(n=!1,d="Does Not Match",h=!0):e||p.TextBox.validateField(!0)}if(!h)for(var f=0;f<o.length;f++)if((i===o[f].type||t.classList.contains(o[f].type))&&!o[f].regExp.test(a)){n=!1,d=o[f].msg;break}return c&&this.container.removeChild(c),n?t.classList.remove(r.INVALID_REQ_FIELD):(t.classList.add(r.INVALID_REQ_FIELD),""!==d&&((u=document.createElement("span")).classList.add(r.ERROR_LABEL),u.textContent=d,this.container.appendChild(u))),n}},{key:"setValue",value:function(e){this.input.value=e,this.checkForValue(),this.validateField()}},{key:"getValue",value:function(){return this.isCKEditor?CKEDITOR.instances[this.input.id].getData().trim():this.isMediumEditor?this.input.innerText.trim():this.isQuillEditor?"":this.input.value.trim()}}]),e}();t.a=l},function(e,t,i){var n,a,s;!function(r){a=[i(3),i(14)],void 0===(s="function"==typeof(n=r)?n.apply(t,a):n)||(e.exports=s)}(function(e,t,i){function n(e,i){for(var n="",a=0;a<e.length;a++)t.prototype.definitions[e.charAt(a)]||i.definitions[e.charAt(a)]||i.optionalmarker.start===e.charAt(a)||i.optionalmarker.end===e.charAt(a)||i.quantifiermarker.start===e.charAt(a)||i.quantifiermarker.end===e.charAt(a)||i.groupmarker.start===e.charAt(a)||i.groupmarker.end===e.charAt(a)||i.alternatormarker===e.charAt(a)?n+="\\"+e.charAt(a):n+=e.charAt(a);return n}return t.extendAliases({numeric:{mask:function(e){if(0!==e.repeat&&isNaN(e.integerDigits)&&(e.integerDigits=e.repeat),e.repeat=0,e.groupSeparator===e.radixPoint&&("."===e.radixPoint?e.groupSeparator=",":","===e.radixPoint?e.groupSeparator=".":e.groupSeparator="")," "===e.groupSeparator&&(e.skipOptionalPartCharacter=i),e.autoGroup=e.autoGroup&&""!==e.groupSeparator,e.autoGroup&&("string"==typeof e.groupSize&&isFinite(e.groupSize)&&(e.groupSize=parseInt(e.groupSize)),isFinite(e.integerDigits))){var t=Math.floor(e.integerDigits/e.groupSize),a=e.integerDigits%e.groupSize;e.integerDigits=parseInt(e.integerDigits)+(0===a?t-1:t),e.integerDigits<1&&(e.integerDigits="*")}e.placeholder.length>1&&(e.placeholder=e.placeholder.charAt(0)),"radixFocus"===e.positionCaretOnClick&&""===e.placeholder&&!1===e.integerOptional&&(e.positionCaretOnClick="lvp"),e.definitions[";"]=e.definitions["~"],e.definitions[";"].definitionSymbol="~",!0===e.numericInput&&(e.positionCaretOnClick="radixFocus"===e.positionCaretOnClick?"lvp":e.positionCaretOnClick,e.digitsOptional=!1,isNaN(e.digits)&&(e.digits=2),e.decimalProtect=!1);var s="[+]";if(s+=n(e.prefix,e),!0===e.integerOptional?s+="~{1,"+e.integerDigits+"}":s+="~{"+e.integerDigits+"}",e.digits!==i){e.radixPointDefinitionSymbol=e.decimalProtect?":":e.radixPoint;var r=e.digits.toString().split(",");isFinite(r[0]&&r[1]&&isFinite(r[1]))?s+=e.radixPointDefinitionSymbol+";{"+e.digits+"}":(isNaN(e.digits)||parseInt(e.digits)>0)&&(e.digitsOptional?s+="["+e.radixPointDefinitionSymbol+";{1,"+e.digits+"}]":s+=e.radixPointDefinitionSymbol+";{"+e.digits+"}")}return s+=n(e.suffix,e),s+="[-]",e.greedy=!1,s},placeholder:"",greedy:!1,digits:"*",digitsOptional:!0,enforceDigitsOnBlur:!1,radixPoint:".",positionCaretOnClick:"radixFocus",groupSize:3,groupSeparator:"",autoGroup:!1,allowMinus:!0,negationSymbol:{front:"-",back:""},integerDigits:"+",integerOptional:!0,prefix:"",suffix:"",rightAlign:!0,decimalProtect:!0,min:null,max:null,step:1,insertMode:!0,autoUnmask:!1,unmaskAsNumber:!1,inputmode:"numeric",preValidation:function(t,n,a,s,r){if("-"===a||a===r.negationSymbol.front)return!0===r.allowMinus&&(r.isNegative=r.isNegative===i||!r.isNegative,""===t.join("")||{caret:n,dopost:!0});if(!1===s&&a===r.radixPoint&&r.digits!==i&&(isNaN(r.digits)||parseInt(r.digits)>0)){var o=e.inArray(r.radixPoint,t);if(-1!==o)return!0===r.numericInput?n===o:{caret:o+1}}return!0},postValidation:function(n,a,s){var r=s.suffix.split(""),o=s.prefix.split("");if(a.pos===i&&a.caret!==i&&!0!==a.dopost)return a;var l=a.caret!==i?a.caret:a.pos,c=n.slice();s.numericInput&&(l=c.length-l-1,c=c.reverse());var u=c[l];if(u===s.groupSeparator&&(u=c[l+=1]),l===c.length-s.suffix.length-1&&u===s.radixPoint)return a;u!==i&&u!==s.radixPoint&&u!==s.negationSymbol.front&&u!==s.negationSymbol.back&&(c[l]="?",s.prefix.length>0&&l>=(!1===s.isNegative?1:0)&&l<s.prefix.length-1+(!1===s.isNegative?1:0)?o[l-(!1===s.isNegative?1:0)]="?":s.suffix.length>0&&l>=c.length-s.suffix.length-(!1===s.isNegative?1:0)&&(r[l-(c.length-s.suffix.length-(!1===s.isNegative?1:0))]="?")),o=o.join(""),r=r.join("");var d=c.join("").replace(o,"");if(d=d.replace(r,""),d=d.replace(new RegExp(t.escapeRegex(s.groupSeparator),"g"),""),d=d.replace(new RegExp("[-"+t.escapeRegex(s.negationSymbol.front)+"]","g"),""),d=d.replace(new RegExp(t.escapeRegex(s.negationSymbol.back)+"$"),""),isNaN(s.placeholder)&&(d=d.replace(new RegExp(t.escapeRegex(s.placeholder),"g"),"")),d.length>1&&1!==d.indexOf(s.radixPoint)&&("0"===u&&(d=d.replace(/^\?/g,"")),d=d.replace(/^0/g,"")),d.charAt(0)===s.radixPoint&&""!==s.radixPoint&&!0!==s.numericInput&&(d="0"+d),""!==d){if(d=d.split(""),(!s.digitsOptional||s.enforceDigitsOnBlur&&"blur"===a.event)&&isFinite(s.digits)){var h=e.inArray(s.radixPoint,d),p=e.inArray(s.radixPoint,c);-1===h&&(d.push(s.radixPoint),h=d.length-1);for(var f=1;f<=s.digits;f++)s.digitsOptional&&(!s.enforceDigitsOnBlur||"blur"!==a.event)||d[h+f]!==i&&d[h+f]!==s.placeholder.charAt(0)?-1!==p&&c[p+f]!==i&&(d[h+f]=d[h+f]||c[p+f]):d[h+f]=a.placeholder||s.placeholder.charAt(0)}if(!0!==s.autoGroup||""===s.groupSeparator||u===s.radixPoint&&a.pos===i&&!a.dopost)d=d.join("");else{var m=d[d.length-1]===s.radixPoint&&a.c===s.radixPoint;d=t(function(e,t){var i="";if(i+="("+t.groupSeparator+"*{"+t.groupSize+"}){*}",""!==t.radixPoint){var n=e.join("").split(t.radixPoint);n[1]&&(i+=t.radixPoint+"*{"+n[1].match(/^\d*\??\d*/)[0].length+"}")}return i}(d,s),{numericInput:!0,jitMasking:!0,definitions:{"*":{validator:"[0-9?]",cardinality:1}}}).format(d.join("")),m&&(d+=s.radixPoint),d.charAt(0)===s.groupSeparator&&d.substr(1)}}if(s.isNegative&&"blur"===a.event&&(s.isNegative="0"!==d),d=o+d,d+=r,s.isNegative&&(d=s.negationSymbol.front+d,d+=s.negationSymbol.back),d=d.split(""),u!==i)if(u!==s.radixPoint&&u!==s.negationSymbol.front&&u!==s.negationSymbol.back)(l=e.inArray("?",d))>-1?d[l]=u:l=a.caret||0;else if(u===s.radixPoint||u===s.negationSymbol.front||u===s.negationSymbol.back){var v=e.inArray(u,d);-1!==v&&(l=v)}s.numericInput&&(l=d.length-l-1,d=d.reverse());var g={caret:u===i||a.pos!==i?l+(s.numericInput?-1:1):l,buffer:d,refreshFromBuffer:a.dopost||n.join("")!==d.join("")};return g.refreshFromBuffer?g:a},onBeforeWrite:function(n,a,s,r){if(n)switch(n.type){case"keydown":return r.postValidation(a,{caret:s,dopost:!0},r);case"blur":case"checkval":var o;if(function(e){e.parseMinMaxOptions===i&&(null!==e.min&&(e.min=e.min.toString().replace(new RegExp(t.escapeRegex(e.groupSeparator),"g"),""),","===e.radixPoint&&(e.min=e.min.replace(e.radixPoint,".")),e.min=isFinite(e.min)?parseFloat(e.min):NaN,isNaN(e.min)&&(e.min=Number.MIN_VALUE)),null!==e.max&&(e.max=e.max.toString().replace(new RegExp(t.escapeRegex(e.groupSeparator),"g"),""),","===e.radixPoint&&(e.max=e.max.replace(e.radixPoint,".")),e.max=isFinite(e.max)?parseFloat(e.max):NaN,isNaN(e.max)&&(e.max=Number.MAX_VALUE)),e.parseMinMaxOptions="done")}(r),null!==r.min||null!==r.max){if(o=r.onUnMask(a.join(""),i,e.extend({},r,{unmaskAsNumber:!0})),null!==r.min&&o<r.min)return r.isNegative=r.min<0,r.postValidation(r.min.toString().replace(".",r.radixPoint).split(""),{caret:s,dopost:!0,placeholder:"0"},r);if(null!==r.max&&o>r.max)return r.isNegative=r.max<0,r.postValidation(r.max.toString().replace(".",r.radixPoint).split(""),{caret:s,dopost:!0,placeholder:"0"},r)}return r.postValidation(a,{caret:s,placeholder:"0",event:"blur"},r);case"_checkval":return{caret:s}}},regex:{integerPart:function(e,i){return i?new RegExp("["+t.escapeRegex(e.negationSymbol.front)+"+]?"):new RegExp("["+t.escapeRegex(e.negationSymbol.front)+"+]?\\d+")},integerNPart:function(e){return new RegExp("[\\d"+t.escapeRegex(e.groupSeparator)+t.escapeRegex(e.placeholder.charAt(0))+"]+")}},definitions:{"~":{validator:function(e,n,a,s,r,o){var l=s?new RegExp("[0-9"+t.escapeRegex(r.groupSeparator)+"]").test(e):new RegExp("[0-9]").test(e);if(!0===l){if(!0!==r.numericInput&&n.validPositions[a]!==i&&"~"===n.validPositions[a].match.def&&!o){var c=n.buffer.join(""),u=(c=(c=c.replace(new RegExp("[-"+t.escapeRegex(r.negationSymbol.front)+"]","g"),"")).replace(new RegExp(t.escapeRegex(r.negationSymbol.back)+"$"),"")).split(r.radixPoint);u.length>1&&(u[1]=u[1].replace(/0/g,r.placeholder.charAt(0))),"0"===u[0]&&(u[0]=u[0].replace(/0/g,r.placeholder.charAt(0))),c=u[0]+r.radixPoint+u[1]||"";var d=n._buffer.join("");for(c===r.radixPoint&&(c=d);null===c.match(t.escapeRegex(d)+"$");)d=d.slice(1);l=(c=(c=c.replace(d,"")).split(""))[a]===i?{pos:a,remove:a}:{pos:a}}}else s||e!==r.radixPoint||n.validPositions[a-1]!==i||(n.buffer[a]="0",l={pos:a+1});return l},cardinality:1},"+":{validator:function(e,t,i,n,a){return a.allowMinus&&("-"===e||e===a.negationSymbol.front)},cardinality:1,placeholder:""},"-":{validator:function(e,t,i,n,a){return a.allowMinus&&e===a.negationSymbol.back},cardinality:1,placeholder:""},":":{validator:function(e,i,n,a,s){var r="["+t.escapeRegex(s.radixPoint)+"]",o=new RegExp(r).test(e);return o&&i.validPositions[n]&&i.validPositions[n].match.placeholder===s.radixPoint&&(o={caret:n+1}),o},cardinality:1,placeholder:function(e){return e.radixPoint}}},onUnMask:function(e,i,n){if(""===i&&!0===n.nullable)return i;var a=e.replace(n.prefix,"");return a=a.replace(n.suffix,""),a=a.replace(new RegExp(t.escapeRegex(n.groupSeparator),"g"),""),""!==n.placeholder.charAt(0)&&(a=a.replace(new RegExp(n.placeholder.charAt(0),"g"),"0")),n.unmaskAsNumber?(""!==n.radixPoint&&-1!==a.indexOf(n.radixPoint)&&(a=a.replace(t.escapeRegex.call(this,n.radixPoint),".")),a=a.replace(new RegExp("^"+t.escapeRegex(n.negationSymbol.front)),"-"),a=a.replace(new RegExp(t.escapeRegex(n.negationSymbol.back)+"$"),""),Number(a)):a},isComplete:function(e,i){var n=e.join("");if(e.slice().join("")!==n)return!1;var a=n.replace(i.prefix,"");return a=a.replace(i.suffix,""),a=a.replace(new RegExp(t.escapeRegex(i.groupSeparator),"g"),""),","===i.radixPoint&&(a=a.replace(t.escapeRegex(i.radixPoint),".")),isFinite(a)},onBeforeMask:function(e,n){if(n.isNegative=i,e=e.toString().charAt(e.length-1)===n.radixPoint?e.toString().substr(0,e.length-1):e.toString(),""!==n.radixPoint&&isFinite(e)){var a=e.split("."),s=""!==n.groupSeparator?parseInt(n.groupSize):0;2===a.length&&(a[0].length>s||a[1].length>s||a[0].length<=s&&a[1].length<s)&&(e=e.replace(".",n.radixPoint))}var r=e.match(/,/g),o=e.match(/\./g);if(e=o&&r?o.length>r.length?(e=e.replace(/\./g,"")).replace(",",n.radixPoint):r.length>o.length?(e=e.replace(/,/g,"")).replace(".",n.radixPoint):e.indexOf(".")<e.indexOf(",")?e.replace(/\./g,""):e.replace(/,/g,""):e.replace(new RegExp(t.escapeRegex(n.groupSeparator),"g"),""),0===n.digits&&(-1!==e.indexOf(".")?e=e.substring(0,e.indexOf(".")):-1!==e.indexOf(",")&&(e=e.substring(0,e.indexOf(",")))),""!==n.radixPoint&&isFinite(n.digits)&&-1!==e.indexOf(n.radixPoint)){var l=e.split(n.radixPoint)[1].match(new RegExp("\\d*"))[0];if(parseInt(n.digits)<l.toString().length){var c=Math.pow(10,parseInt(n.digits));e=e.replace(t.escapeRegex(n.radixPoint),"."),e=(e=Math.round(parseFloat(e)*c)/c).toString().replace(".",n.radixPoint)}}return e},canClearPosition:function(e,t,i,n,a){var s=e.validPositions[t],r=s.input!==a.radixPoint||null!==e.validPositions[t].match.fn&&!1===a.decimalProtect||s.input===a.radixPoint&&e.validPositions[t+1]&&null===e.validPositions[t+1].match.fn||isFinite(s.input)||t===i||s.input===a.groupSeparator||s.input===a.negationSymbol.front||s.input===a.negationSymbol.back;return!r||"+"!==s.match.nativeDef&&"-"!==s.match.nativeDef||(a.isNegative=!1),r},onKeyDown:function(i,n,a,s){var r=e(this);if(i.ctrlKey)switch(i.keyCode){case t.keyCode.UP:r.val(parseFloat(this.inputmask.unmaskedvalue())+parseInt(s.step)),r.trigger("setvalue");break;case t.keyCode.DOWN:r.val(parseFloat(this.inputmask.unmaskedvalue())-parseInt(s.step)),r.trigger("setvalue")}}},currency:{prefix:"$ ",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:!0,digits:2,digitsOptional:!1,clearMaskOnLostFocus:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:0,radixPoint:""},percentage:{alias:"numeric",digits:2,digitsOptional:!0,radixPoint:".",placeholder:"0",autoGroup:!1,min:0,max:100,suffix:" %",allowMinus:!1}}),t})},function(e,t,i){var n,a,s;!function(r){a=[i(3),i(4),i(5)],void 0===(s="function"==typeof(n=r)?n.apply(t,a):n)||(e.exports=s)}(function(e,t,i,n){function a(t,i,r){if(!(this instanceof a))return new a(t,i,r);this.el=n,this.events={},this.maskset=n,this.refreshValue=!1,!0!==r&&(e.isPlainObject(t)?i=t:(i=i||{}).alias=t,this.opts=e.extend(!0,{},this.defaults,i),this.noMasksCache=i&&i.definitions!==n,this.userOptions=i||{},this.isRTL=this.opts.numericInput,s(this.opts.alias,i,this.opts))}function s(t,i,r){var o=a.prototype.aliases[t];return o?(o.alias&&s(o.alias,n,r),e.extend(!0,r,o),e.extend(!0,r,i),!0):(null===r.mask&&(r.mask=t),!1)}function r(t,i){function s(t,s,r){var o=!1;if(null!==t&&""!==t||((o=null!==r.regex)?t=(t=r.regex).replace(/^(\^)(.*)(\$)$/,"$2"):(o=!0,t=".*")),1===t.length&&!1===r.greedy&&0!==r.repeat&&(r.placeholder=""),r.repeat>0||"*"===r.repeat||"+"===r.repeat){var l="*"===r.repeat?0:"+"===r.repeat?1:r.repeat;t=r.groupmarker.start+t+r.groupmarker.end+r.quantifiermarker.start+l+","+r.repeat+r.quantifiermarker.end}var c,u=o?"regex_"+r.regex:r.numericInput?t.split("").reverse().join(""):t;return a.prototype.masksCache[u]===n||!0===i?(c={mask:t,maskToken:a.prototype.analyseMask(t,o,r),validPositions:{},_buffer:n,buffer:n,tests:{},metadata:s,maskLength:n},!0!==i&&(a.prototype.masksCache[u]=c,c=e.extend(!0,{},a.prototype.masksCache[u]))):c=e.extend(!0,{},a.prototype.masksCache[u]),c}if(e.isFunction(t.mask)&&(t.mask=t.mask(t)),e.isArray(t.mask)){if(t.mask.length>1){t.keepStatic=null===t.keepStatic||t.keepStatic;var r=t.groupmarker.start;return e.each(t.numericInput?t.mask.reverse():t.mask,function(i,a){r.length>1&&(r+=t.groupmarker.end+t.alternatormarker+t.groupmarker.start),a.mask===n||e.isFunction(a.mask)?r+=a:r+=a.mask}),r+=t.groupmarker.end,s(r,t.mask,t)}t.mask=t.mask.pop()}return t.mask&&t.mask.mask!==n&&!e.isFunction(t.mask.mask)?s(t.mask.mask,t.mask,t):s(t.mask,t.mask,t)}function o(s,r,l){function p(e,t,i){t=t||0;var a,s,r,o=[],c=0,u=v();do{!0===e&&f().validPositions[c]?(s=(r=f().validPositions[c]).match,a=r.locator.slice(),o.push(!0===i?r.input:!1===i?s.nativeDef:D(c,s))):(s=(r=k(c,a,c-1)).match,a=r.locator.slice(),(!1===l.jitMasking||c<u||"number"==typeof l.jitMasking&&isFinite(l.jitMasking)&&l.jitMasking>c)&&o.push(!1===i?s.nativeDef:D(c,s))),c++}while((q===n||c<q)&&(null!==s.fn||""!==s.def)||t>c);return""===o[o.length-1]&&o.pop(),f().maskLength=c+1,o}function f(){return r}function m(e){var t=f();t.buffer=n,!0!==e&&(t.validPositions={},t.p=0)}function v(e,t,i){var a=-1,s=-1,r=i||f().validPositions;e===n&&(e=-1);for(var o in r){var l=parseInt(o);r[l]&&(t||!0!==r[l].generatedInput)&&(l<=e&&(a=l),l>=e&&(s=l))}return-1!==a&&e-a>1||s<e?a:s}function g(t,i,a,s){var r,o=t,c=e.extend(!0,{},f().validPositions),u=!1;for(f().p=t,r=i-1;r>=o;r--)f().validPositions[r]!==n&&(!0!==a&&(!f().validPositions[r].match.optionality&&function(e){var t=f().validPositions[e];if(t!==n&&null===t.match.fn){var i=f().validPositions[e-1],a=f().validPositions[e+1];return i!==n&&a!==n}return!1}(r)||!1===l.canClearPosition(f(),r,v(),s,l))||delete f().validPositions[r]);for(m(!0),r=o+1;r<=v();){for(;f().validPositions[o]!==n;)o++;if(r<o&&(r=o+1),f().validPositions[r]===n&&S(r))r++;else{var d=k(r);!1===u&&c[o]&&c[o].match.def===d.match.def?(f().validPositions[o]=e.extend(!0,{},c[o]),f().validPositions[o].input=d.input,delete f().validPositions[r],r++):E(o,d.match.def)?!1!==_(o,d.input||D(r),!0)&&(delete f().validPositions[r],r++,u=!0):S(r)||(r++,o--),o++}}m(!0)}function b(e,t){for(var i,a=e,s=v(),r=f().validPositions[s]||I(0)[0],o=r.alternation!==n?r.locator[r.alternation].toString().split(","):[],c=0;c<a.length&&(!((i=a[c]).match&&(l.greedy&&!0!==i.match.optionalQuantifier||(!1===i.match.optionality||!1===i.match.newBlockMarker)&&!0!==i.match.optionalQuantifier)&&(r.alternation===n||r.alternation!==i.alternation||i.locator[r.alternation]!==n&&w(i.locator[r.alternation].toString().split(","),o)))||!0===t&&(null!==i.match.fn||/[0-9a-bA-Z]/.test(i.match.def)));c++);return i}function k(e,t,i){return f().validPositions[e]||b(I(e,t?t.slice():t,i))}function y(e){return f().validPositions[e]?f().validPositions[e]:I(e)[0]}function E(e,t){for(var i=!1,n=I(e),a=0;a<n.length;a++)if(n[a].match&&n[a].match.def===t){i=!0;break}return i}function I(t,i,a){function s(i,a,r,c){function d(r,c,v){function g(t,i){var n=0===e.inArray(t,i.matches);return n||e.each(i.matches,function(e,a){if(!0===a.isQuantifier&&(n=g(t,i.matches[e-1])))return!1}),n}function b(t,i,a){var s,r;if(f().validPositions[t-1]&&a&&f().tests[t])for(var o=f().validPositions[t-1].locator,l=f().tests[t][0].locator,c=0;c<a;c++)if(o[c]!==l[c])return o.slice(a+1);return(f().tests[t]||f().validPositions[t])&&e.each(f().tests[t]||[f().validPositions[t]],function(e,t){var o=a!==n?a:t.alternation,l=t.locator[o]!==n?t.locator[o].toString().indexOf(i):-1;(r===n||l<r)&&-1!==l&&(s=t,r=l)}),s?s.locator.slice((a!==n?a:s.alternation)+1):a!==n?b(t,i):n}if(u>1e4)throw"Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+f().mask;if(u===t&&r.matches===n)return h.push({match:r,locator:c.reverse(),cd:m}),!0;if(r.matches!==n){if(r.isGroup&&v!==r){if(r=d(i.matches[e.inArray(r,i.matches)+1],c))return!0}else if(r.isOptional){var k=r;if(r=s(r,a,c,v)){if(o=h[h.length-1].match,!g(o,k))return!0;p=!0,u=t}}else if(r.isAlternator){var y,E=r,I=[],x=h.slice(),C=c.length,P=a.length>0?a.shift():-1;if(-1===P||"string"==typeof P){var w,_=u,S=a.slice(),L=[];if("string"==typeof P)L=P.split(",");else for(w=0;w<E.matches.length;w++)L.push(w);for(var A=0;A<L.length;A++){if(w=parseInt(L[A]),h=[],a=b(u,w,C)||S.slice(),!0!==(r=d(E.matches[w]||i.matches[w],[w].concat(c),v)||r)&&r!==n&&L[L.length-1]<E.matches.length){var O=e.inArray(r,i.matches)+1;i.matches.length>O&&(r=d(i.matches[O],[O].concat(c.slice(1,c.length)),v))&&(L.push(O.toString()),e.each(h,function(e,t){t.alternation=c.length-1}))}y=h.slice(),u=_,h=[];for(var D=0;D<y.length;D++){var T=y[D],R=!1;T.alternation=T.alternation||C;for(var M=0;M<I.length;M++){var N=I[M];if("string"!=typeof P||-1!==e.inArray(T.locator[T.alternation].toString(),L)){if(function(e,t){return e.match.nativeDef===t.match.nativeDef||e.match.def===t.match.nativeDef||e.match.nativeDef===t.match.def}(T,N)){R=!0,T.alternation===N.alternation&&-1===N.locator[N.alternation].toString().indexOf(T.locator[T.alternation])&&(N.locator[N.alternation]=N.locator[N.alternation]+","+T.locator[T.alternation],N.alternation=T.alternation),T.match.nativeDef===N.match.def&&(T.locator[T.alternation]=N.locator[N.alternation],I.splice(I.indexOf(N),1,T));break}if(T.match.def===N.match.def){R=!1;break}if(function(e,i){return null===e.match.fn&&null!==i.match.fn&&i.match.fn.test(e.match.def,f(),t,!1,l,!1)}(T,N)||function(e,i){return null!==e.match.fn&&null!==i.match.fn&&i.match.fn.test(e.match.def.replace(/[\[\]]/g,""),f(),t,!1,l,!1)}(T,N)){T.alternation===N.alternation&&-1===T.locator[T.alternation].toString().indexOf(N.locator[N.alternation].toString().split("")[0])&&(T.na=T.na||T.locator[T.alternation].toString(),-1===T.na.indexOf(T.locator[T.alternation].toString().split("")[0])&&(T.na=T.na+","+T.locator[N.alternation].toString().split("")[0]),R=!0,T.locator[T.alternation]=N.locator[N.alternation].toString().split("")[0]+","+T.locator[T.alternation],I.splice(I.indexOf(N),0,T));break}}}R||I.push(T)}}"string"==typeof P&&(I=e.map(I,function(t,i){if(isFinite(i)){var a=t.alternation,s=t.locator[a].toString().split(",");t.locator[a]=n,t.alternation=n;for(var r=0;r<s.length;r++)-1!==e.inArray(s[r],L)&&(t.locator[a]!==n?(t.locator[a]+=",",t.locator[a]+=s[r]):t.locator[a]=parseInt(s[r]),t.alternation=a);if(t.locator[a]!==n)return t}})),h=x.concat(I),u=t,p=h.length>0,r=I.length>0,a=S.slice()}else r=d(E.matches[P]||i.matches[P],[P].concat(c),v);if(r)return!0}else if(r.isQuantifier&&v!==i.matches[e.inArray(r,i.matches)-1])for(var F=r,j=a.length>0?a.shift():0;j<(isNaN(F.quantifier.max)?j+1:F.quantifier.max)&&u<=t;j++){var H=i.matches[e.inArray(F,i.matches)-1];if(r=d(H,[j].concat(c),H)){if(o=h[h.length-1].match,o.optionalQuantifier=j>F.quantifier.min-1,g(o,H)){if(j>F.quantifier.min-1){p=!0,u=t;break}return!0}return!0}}else if(r=s(r,a,c,v))return!0}else u++}for(var v=a.length>0?a.shift():0;v<i.matches.length;v++)if(!0!==i.matches[v].isQuantifier){var g=d(i.matches[v],[v].concat(r),c);if(g&&u===t)return g;if(u>t)break}}function r(e){if(l.keepStatic&&t>0&&e.length>1+(""===e[e.length-1].match.def?1:0)&&!0!==e[0].match.optionality&&!0!==e[0].match.optionalQuantifier&&null===e[0].match.fn&&!/[0-9a-bA-Z]/.test(e[0].match.def)){if(f().validPositions[t-1]===n)return[b(e)];if(f().validPositions[t-1].alternation===e[0].alternation)return[b(e)];if(f().validPositions[t-1])return[b(e)]}return e}var o,c=f().maskToken,u=i?a:0,d=i?i.slice():[0],h=[],p=!1,m=i?i.join(""):"";if(t>-1){if(i===n){for(var v,g=t-1;(v=f().validPositions[g]||f().tests[g])===n&&g>-1;)g--;v!==n&&g>-1&&(d=function(t){var i=[];return e.isArray(t)||(t=[t]),t.length>0&&(t[0].alternation===n?0===(i=b(t.slice()).locator.slice()).length&&(i=t[0].locator.slice()):e.each(t,function(e,t){if(""!==t.def)if(0===i.length)i=t.locator.slice();else for(var n=0;n<i.length;n++)t.locator[n]&&-1===i[n].toString().indexOf(t.locator[n])&&(i[n]+=","+t.locator[n])})),i}(v),m=d.join(""),u=g)}if(f().tests[t]&&f().tests[t][0].cd===m)return r(f().tests[t]);for(var k=d.shift();k<c.length&&!(s(c[k],d,[k])&&u===t||u>t);k++);}return(0===h.length||p)&&h.push({match:{fn:null,cardinality:0,optionality:!0,casing:null,def:"",placeholder:""},locator:[],cd:m}),i!==n&&f().tests[t]?r(e.extend(!0,[],h)):(f().tests[t]=e.extend(!0,[],h),r(f().tests[t]))}function x(){return f()._buffer===n&&(f()._buffer=p(!1,1),f().buffer===n&&(f().buffer=f()._buffer.slice())),f()._buffer}function C(e){return f().buffer!==n&&!0!==e||(f().buffer=p(!0,v(),!0)),f().buffer}function P(e,t,i){var a,s;if(!0===e)m(),e=0,t=i.length;else for(a=e;a<t;a++)delete f().validPositions[a];for(s=e,a=e;a<t;a++)if(m(!0),i[a]!==l.skipOptionalPartCharacter){var r=_(s,i[a],!0,!0);!1!==r&&(m(!0),s=r.caret!==n?r.caret:r.pos+1)}}function w(t,i,a){for(var s,r=l.greedy?i:i.slice(0,1),o=!1,c=a!==n?a.split(","):[],u=0;u<c.length;u++)-1!==(s=t.indexOf(c[u]))&&t.splice(s,1);for(var d=0;d<t.length;d++)if(-1!==e.inArray(t[d],r)){o=!0;break}return o}function _(t,i,s,r,o,c){function u(e){var t=W?e.begin-e.end>1||e.begin-e.end==1:e.end-e.begin>1||e.end-e.begin==1;return t&&0===e.begin&&e.end===f().maskLength?"full":t}function d(i,s,o){var c=!1;return e.each(I(i),function(d,p){for(var b=p.match,k=s?1:0,y="",E=b.cardinality;E>k;E--)y+=function(e){return f().validPositions[e]===n?D(e):f().validPositions[e].input}(i-(E-1));if(s&&(y+=s),C(!0),!1!==(c=null!=b.fn?b.fn.test(y,f(),i,o,l,u(t)):(s===b.def||s===l.skipOptionalPartCharacter)&&""!==b.def&&{c:D(i,b,!0)||b.def,pos:i})){var I=c.c!==n?c.c:s;I=I===l.skipOptionalPartCharacter&&null===b.fn?D(i,b,!0)||b.def:I;var x=i,w=C();if(c.remove!==n&&(e.isArray(c.remove)||(c.remove=[c.remove]),e.each(c.remove.sort(function(e,t){return t-e}),function(e,t){g(t,t+1,!0)})),c.insert!==n&&(e.isArray(c.insert)||(c.insert=[c.insert]),e.each(c.insert.sort(function(e,t){return e-t}),function(e,t){_(t.pos,t.c,!0,r)})),c.refreshFromBuffer){var S=c.refreshFromBuffer;if(P(!0===S?S:S.start,S.end,w),c.pos===n&&c.c===n)return c.pos=v(),!1;if((x=c.pos!==n?c.pos:i)!==i)return c=e.extend(c,_(x,I,!0,r)),!1}else if(!0!==c&&c.pos!==n&&c.pos!==i&&(x=c.pos,P(i,x,C().slice()),x!==i))return c=e.extend(c,_(x,I,!0)),!1;return(!0===c||c.pos!==n||c.c!==n)&&(d>0&&m(!0),h(x,e.extend({},p,{input:function(t,i,n){switch(l.casing||i.casing){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase();break;case"title":var s=f().validPositions[n-1];t=0===n||s&&s.input===String.fromCharCode(a.keyCode.SPACE)?t.toUpperCase():t.toLowerCase();break;default:if(e.isFunction(l.casing)){var r=Array.prototype.slice.call(arguments);r.push(f().validPositions),t=l.casing.apply(this,r)}}return t}(I,b,x)}),r,u(t))||(c=!1),!1)}}),c}function h(t,i,a,s){if(s||l.insertMode&&f().validPositions[t]!==n&&a===n){var r,o=e.extend(!0,{},f().validPositions),c=v(n,!0);for(r=t;r<=c;r++)delete f().validPositions[r];f().validPositions[t]=e.extend(!0,{},i);var u,d=!0,h=f().validPositions,g=!1,b=f().maskLength;for(r=u=t;r<=c;r++){var k=o[r];if(k!==n)for(var y=u;y<f().maskLength&&(null===k.match.fn&&h[r]&&(!0===h[r].match.optionalQuantifier||!0===h[r].match.optionality)||null!=k.match.fn);){if(y++,!1===g&&o[y]&&o[y].match.def===k.match.def)f().validPositions[y]=e.extend(!0,{},o[y]),f().validPositions[y].input=k.input,p(y),u=y,d=!0;else if(E(y,k.match.def)){var I=_(y,k.input,!0,!0);d=!1!==I,u=I.caret||I.insert?v():y,g=!0}else if(!(d=!0===k.generatedInput)&&y>=f().maskLength-1)break;if(f().maskLength<b&&(f().maskLength=b),d)break}if(!d)break}if(!d)return f().validPositions=e.extend(!0,{},o),m(!0),!1}else f().validPositions[t]=e.extend(!0,{},i);return m(!0),!0}function p(t){for(var i=t-1;i>-1&&!f().validPositions[i];i--);var a,s;for(i++;i<t;i++)f().validPositions[i]===n&&(!1===l.jitMasking||l.jitMasking>i)&&(""===(s=I(i,k(i-1).locator,i-1).slice())[s.length-1].match.def&&s.pop(),(a=b(s))&&(a.match.def===l.radixPointDefinitionSymbol||!S(i,!0)||e.inArray(l.radixPoint,C())<i&&a.match.fn&&a.match.fn.test(D(i),f(),i,!1,l))&&!1!==(x=d(i,D(i,a.match,!0)||(null==a.match.fn?a.match.def:""!==D(i)?D(i):C()[i]),!0))&&(f().validPositions[x.pos||i].generatedInput=!0))}s=!0===s;var y=t;t.begin!==n&&(y=W&&!u(t)?t.end:t.begin);var x=!0,A=e.extend(!0,{},f().validPositions);if(e.isFunction(l.preValidation)&&!s&&!0!==r&&!0!==c&&(x=l.preValidation(C(),y,i,u(t),l)),!0===x){if(p(y),u(t)&&(H(n,a.keyCode.DELETE,t,!0,!0),y=f().p),y<f().maskLength&&(q===n||y<q)&&(x=d(y,i,s),(!s||!0===r)&&!1===x&&!0!==c)){var O=f().validPositions[y];if(!O||null!==O.match.fn||O.match.def!==i&&i!==l.skipOptionalPartCharacter){if((l.insertMode||f().validPositions[L(y)]===n)&&!S(y,!0))for(var T=y+1,R=L(y);T<=R;T++)if(!1!==(x=d(T,i,s))){!function(t,i){var a=f().validPositions[i];if(a)for(var s=a.locator,r=s.length,o=t;o<i;o++)if(f().validPositions[o]===n&&!S(o,!0)){var l=I(o).slice(),c=b(l,!0),u=-1;""===l[l.length-1].match.def&&l.pop(),e.each(l,function(e,t){for(var i=0;i<r;i++){if(t.locator[i]===n||!w(t.locator[i].toString().split(","),s[i].toString().split(","),t.na)){var a=s[i],o=c.locator[i],l=t.locator[i];a-o>Math.abs(a-l)&&(c=t);break}u<i&&(u=i,c=t)}}),(c=e.extend({},c,{input:D(o,c.match,!0)||c.match.def})).generatedInput=!0,h(o,c,!0),f().validPositions[i]=n,d(i,a.input,!0)}}(y,x.pos!==n?x.pos:T),y=T;break}}else x={caret:L(y)}}!1===x&&l.keepStatic&&!s&&!0!==o&&(x=function(t,i,a){var s,o,c,u,d,h,p,g,b=e.extend(!0,{},f().validPositions),k=!1,y=v();for(u=f().validPositions[y];y>=0;y--)if((c=f().validPositions[y])&&c.alternation!==n){if(s=y,o=f().validPositions[s].alternation,u.locator[c.alternation]!==c.locator[c.alternation])break;u=c}if(o!==n){g=parseInt(s);var E=u.locator[u.alternation||o]!==n?u.locator[u.alternation||o]:p[0];E.length>0&&(E=E.split(",")[0]);var x=f().validPositions[g],C=f().validPositions[g-1];e.each(I(g,C?C.locator:n,g-1),function(s,c){p=c.locator[o]?c.locator[o].toString().split(","):[];for(var u=0;u<p.length;u++){var y=[],I=0,C=0,P=!1;if(E<p[u]&&(c.na===n||-1===e.inArray(p[u],c.na.split(","))||-1===e.inArray(E.toString(),p))){f().validPositions[g]=e.extend(!0,{},c);var w=f().validPositions[g].locator;for(f().validPositions[g].locator[o]=parseInt(p[u]),null==c.match.fn?(x.input!==c.match.def&&(P=!0,!0!==x.generatedInput&&y.push(x.input)),C++,f().validPositions[g].generatedInput=!/[0-9a-bA-Z]/.test(c.match.def),f().validPositions[g].input=c.match.def):f().validPositions[g].input=x.input,d=g+1;d<v(n,!0)+1;d++)(h=f().validPositions[d])&&!0!==h.generatedInput&&/[0-9a-bA-Z]/.test(h.input)?y.push(h.input):d<t&&I++,delete f().validPositions[d];for(P&&y[0]===c.match.def&&y.shift(),m(!0),k=!0;y.length>0;){var S=y.shift();if(S!==l.skipOptionalPartCharacter&&!(k=_(v(n,!0)+1,S,!1,r,!0)))break}if(k){f().validPositions[g].locator=w;var L=v(t)+1;for(d=g+1;d<v()+1;d++)((h=f().validPositions[d])===n||null==h.match.fn)&&d<t+(C-I)&&C++;k=_((t+=C-I)>L?L:t,i,a,r,!0)}if(k)return!1;m(),f().validPositions=e.extend(!0,{},b)}}})}return k}(y,i,s)),!0===x&&(x={pos:y})}if(e.isFunction(l.postValidation)&&!1!==x&&!s&&!0!==r&&!0!==c){var M=l.postValidation(C(!0),x,l);if(M.refreshFromBuffer&&M.buffer){var N=M.refreshFromBuffer;P(!0===N?N:N.start,N.end,M.buffer)}x=!0===M?x:M}return x&&x.pos===n&&(x.pos=y),!1!==x&&!0!==c||(m(!0),f().validPositions=e.extend(!0,{},A)),x}function S(e,t){var i=k(e).match;if(""===i.def&&(i=y(e).match),null!=i.fn)return i.fn;if(!0!==t&&e>-1){var n=I(e);return n.length>1+(""===n[n.length-1].match.def?1:0)}return!1}function L(e,t){var i=f().maskLength;if(e>=i)return i;var n=e;for(I(i+1).length>1&&(p(!0,i+1,!0),i=f().maskLength);++n<i&&(!0===t&&(!0!==y(n).match.newBlockMarker||!S(n))||!0!==t&&!S(n)););return n}function A(e,t){var i,n=e;if(n<=0)return 0;for(;--n>0&&(!0===t&&!0!==y(n).match.newBlockMarker||!0!==t&&!S(n)&&((i=I(n)).length<2||2===i.length&&""===i[1].match.def)););return n}function O(t,i,a,s,r){if(s&&e.isFunction(l.onBeforeWrite)){var o=l.onBeforeWrite.call(Y,s,i,a,l);if(o){if(o.refreshFromBuffer){var c=o.refreshFromBuffer;P(!0===c?c:c.start,c.end,o.buffer||i),i=C(!0)}a!==n&&(a=o.caret!==n?o.caret:a)}}t!==n&&(t.inputmask._valueSet(i.join("")),a===n||s!==n&&"blur"===s.type?G(t,a,0===i.length):h&&s&&"input"===s.type?setTimeout(function(){M(t,a)},0):M(t,a),!0===r&&(z=!0,e(t).trigger("input")))}function D(t,i,a){if((i=i||y(t).match).placeholder!==n||!0===a)return e.isFunction(i.placeholder)?i.placeholder(l):i.placeholder;if(null===i.fn){if(t>-1&&f().validPositions[t]===n){var s,r=I(t),o=[];if(r.length>1+(""===r[r.length-1].match.def?1:0))for(var c=0;c<r.length;c++)if(!0!==r[c].match.optionality&&!0!==r[c].match.optionalQuantifier&&(null===r[c].match.fn||s===n||!1!==r[c].match.fn.test(s.match.def,f(),t,!0,l))&&(o.push(r[c]),null===r[c].match.fn&&(s=r[c]),o.length>1&&/[0-9a-bA-Z]/.test(o[0].match.def)))return l.placeholder.charAt(t%l.placeholder.length)}return i.def}return l.placeholder.charAt(t%l.placeholder.length)}function T(t,s,r,o,c){var u=o.slice(),d="",h=-1,p=n;if(m(),r||!0===l.autoUnmask)h=L(h);else{var g=x().slice(0,L(-1)).join(""),b=u.join("").match(new RegExp("^"+a.escapeRegex(g),"g"));b&&b.length>0&&(u.splice(0,b.length*g.length),h=L(h))}if(-1===h?(f().p=L(h),h=0):f().p=h,e.each(u,function(i,a){if(a!==n)if(f().validPositions[i]===n&&u[i]===D(i)&&S(i,!0)&&!1===_(i,u[i],!0,n,n,!0))f().p++;else{var s=new e.Event("_checkval");s.which=a.charCodeAt(0),d+=a;var o=v(n,!0),c=f().validPositions[o],g=k(o+1,c?c.locator.slice():n,o);if(!function(e,t){return-1!==x().slice(e,L(e)).join("").indexOf(t)&&!S(e)&&y(e).match.nativeDef===t.charAt(t.length-1)}(h,d)||r||l.autoUnmask){var b=r?i:null==g.match.fn&&g.match.optionality&&o+1<f().p?o+1:f().p;p=ee.keypressEvent.call(t,s,!0,!1,r,b),h=b+1,d=""}else p=ee.keypressEvent.call(t,s,!0,!1,!0,o+1);if(!1!==p&&!r&&e.isFunction(l.onBeforeWrite)){var E=p;if(p=l.onBeforeWrite.call(Y,s,C(),p.forwardPosition,l),(p=e.extend(E,p))&&p.refreshFromBuffer){var I=p.refreshFromBuffer;P(!0===I?I:I.start,I.end,p.buffer),m(!0),p.caret&&(f().p=p.caret,p.forwardPosition=p.caret)}}}}),s){var E=n;i.activeElement===t&&p&&(E=l.numericInput?A(p.forwardPosition):p.forwardPosition),O(t,C(),E,c||new e.Event("checkval"),c&&"input"===c.type)}}function R(t){if(t){if(t.inputmask===n)return t.value;t.inputmask&&t.inputmask.refreshValue&&ee.setValueEvent.call(t)}var i=[],a=f().validPositions;for(var s in a)a[s].match&&null!=a[s].match.fn&&i.push(a[s].input);var r=0===i.length?"":(W?i.reverse():i).join("");if(e.isFunction(l.onUnMask)){var o=(W?C().slice().reverse():C()).join("");r=l.onUnMask.call(Y,o,r,l)}return r}function M(e,a,s,r){function o(e){return!0===r||!W||"number"!=typeof e||l.greedy&&""===l.placeholder||(e=C().join("").length-e),e}var u;if(a===n)return e.setSelectionRange?(a=e.selectionStart,s=e.selectionEnd):t.getSelection?(u=t.getSelection().getRangeAt(0)).commonAncestorContainer.parentNode!==e&&u.commonAncestorContainer!==e||(a=u.startOffset,s=u.endOffset):i.selection&&i.selection.createRange&&(s=(a=0-(u=i.selection.createRange()).duplicate().moveStart("character",-e.inputmask._valueGet().length))+u.text.length),{begin:o(a),end:o(s)};if(a.begin!==n&&(s=a.end,a=a.begin),"number"==typeof a){a=o(a),s="number"==typeof(s=o(s))?s:a;var d=parseInt(((e.ownerDocument.defaultView||t).getComputedStyle?(e.ownerDocument.defaultView||t).getComputedStyle(e,null):e.currentStyle).fontSize)*s;if(e.scrollLeft=d>e.scrollWidth?d:0,c||!1!==l.insertMode||a!==s||s++,e.setSelectionRange)e.selectionStart=a,e.selectionEnd=s;else if(t.getSelection){if(u=i.createRange(),e.firstChild===n||null===e.firstChild){var h=i.createTextNode("");e.appendChild(h)}u.setStart(e.firstChild,a<e.inputmask._valueGet().length?a:e.inputmask._valueGet().length),u.setEnd(e.firstChild,s<e.inputmask._valueGet().length?s:e.inputmask._valueGet().length),u.collapse(!0);var p=t.getSelection();p.removeAllRanges(),p.addRange(u)}else e.createTextRange&&((u=e.createTextRange()).collapse(!0),u.moveEnd("character",s),u.moveStart("character",a),u.select());G(e,{begin:a,end:s})}}function N(t){var i,a,s=C(),r=s.length,o=v(),l={},c=f().validPositions[o],u=c!==n?c.locator.slice():n;for(i=o+1;i<s.length;i++)u=(a=k(i,u,i-1)).locator.slice(),l[i]=e.extend(!0,{},a);var d=c&&c.alternation!==n?c.locator[c.alternation]:n;for(i=r-1;i>o&&((a=l[i]).match.optionality||a.match.optionalQuantifier&&a.match.newBlockMarker||d&&(d!==l[i].locator[c.alternation]&&null!=a.match.fn||null===a.match.fn&&a.locator[c.alternation]&&w(a.locator[c.alternation].toString().split(","),d.toString().split(","))&&""!==I(i)[0].def))&&s[i]===D(i,a.match);i--)r--;return t?{l:r,def:l[r]?l[r].match:n}:r}function F(e){for(var t,i=N(),a=e.length,s=f().validPositions[v()];i<a&&!S(i,!0)&&(t=s!==n?k(i,s.locator.slice(""),s):y(i))&&!0!==t.match.optionality&&(!0!==t.match.optionalQuantifier&&!0!==t.match.newBlockMarker||i+1===a&&""===(s!==n?k(i+1,s.locator.slice(""),s):y(i+1)).match.def);)i++;for(;(t=f().validPositions[i-1])&&t&&t.match.optionality&&t.input===l.skipOptionalPartCharacter;)i--;return e.splice(i),e}function j(t){if(e.isFunction(l.isComplete))return l.isComplete(t,l);if("*"===l.repeat)return n;var i=!1,a=N(!0),s=A(a.l);if(a.def===n||a.def.newBlockMarker||a.def.optionality||a.def.optionalQuantifier){i=!0;for(var r=0;r<=s;r++){var o=k(r).match;if(null!==o.fn&&f().validPositions[r]===n&&!0!==o.optionality&&!0!==o.optionalQuantifier||null===o.fn&&t[r]!==D(r,o)){i=!1;break}}}return i}function H(t,i,s,r,o){if((l.numericInput||W)&&(i===a.keyCode.BACKSPACE?i=a.keyCode.DELETE:i===a.keyCode.DELETE&&(i=a.keyCode.BACKSPACE),W)){var c=s.end;s.end=s.begin,s.begin=c}i===a.keyCode.BACKSPACE&&(s.end-s.begin<1||!1===l.insertMode)?(s.begin=A(s.begin),f().validPositions[s.begin]!==n&&f().validPositions[s.begin].input===l.groupSeparator&&s.begin--):i===a.keyCode.DELETE&&s.begin===s.end&&(s.end=S(s.end,!0)&&f().validPositions[s.end]&&f().validPositions[s.end].input!==l.radixPoint?s.end+1:L(s.end)+1,f().validPositions[s.begin]!==n&&f().validPositions[s.begin].input===l.groupSeparator&&s.end++),g(s.begin,s.end,!1,r),!0!==r&&function(){if(l.keepStatic){for(var i=[],a=v(-1,!0),s=e.extend(!0,{},f().validPositions),r=f().validPositions[a];a>=0;a--){var o=f().validPositions[a];if(o){if(!0!==o.generatedInput&&/[0-9a-bA-Z]/.test(o.input)&&i.push(o.input),delete f().validPositions[a],o.alternation!==n&&o.locator[o.alternation]!==r.locator[o.alternation])break;r=o}}if(a>-1)for(f().p=L(v(-1,!0));i.length>0;){var c=new e.Event("keypress");c.which=i.pop().charCodeAt(0),ee.keypressEvent.call(t,c,!0,!1,!1,f().p)}else f().validPositions=e.extend(!0,{},s)}}();var u=v(s.begin,!0);if(u<s.begin)f().p=L(u);else if(!0!==r&&(f().p=s.begin,!0!==o))for(;f().p<u&&f().validPositions[f().p]===n;)f().p++}function B(n){var a=(n.ownerDocument.defaultView||t).getComputedStyle(n,null),s=i.createElement("div");s.style.width=a.width,s.style.textAlign=a.textAlign,(K=i.createElement("div")).className="im-colormask",n.parentNode.insertBefore(K,n),n.parentNode.removeChild(n),K.appendChild(s),K.appendChild(n),n.style.left=s.offsetLeft+"px",e(n).on("click",function(e){return M(n,function(e){var t,s=i.createElement("span");for(var r in a)isNaN(r)&&-1!==r.indexOf("font")&&(s.style[r]=a[r]);s.style.textTransform=a.textTransform,s.style.letterSpacing=a.letterSpacing,s.style.position="absolute",s.style.height="auto",s.style.width="auto",s.style.visibility="hidden",s.style.whiteSpace="nowrap",i.body.appendChild(s);var o,l=n.inputmask._valueGet(),c=0;for(t=0,o=l.length;t<=o;t++){if(s.innerHTML+=l.charAt(t)||"_",s.offsetWidth>=e){var u=e-c,d=s.offsetWidth-e;s.innerHTML=l.charAt(t),t=(u-=s.offsetWidth/3)<d?t-1:t;break}c=s.offsetWidth}return i.body.removeChild(s),t}(e.clientX)),ee.clickEvent.call(n,[e])}),e(n).on("keydown",function(e){e.shiftKey||!1===l.insertMode||setTimeout(function(){G(n)},0)})}function G(e,t,a){function s(){h||null!==o.fn&&c.input!==n?h&&(null!==o.fn&&c.input!==n||""===o.def)&&(h=!1,d+="</span>"):(h=!0,d+="<span class='im-static'>")}function r(n){!0!==n&&p!==t.begin||i.activeElement!==e||(d+="<span class='im-caret' style='border-right-width: 1px;border-right-style: solid;'></span>")}var o,c,u,d="",h=!1,p=0;if(K!==n){var m=C();if(t===n?t=M(e):t.begin===n&&(t={begin:t,end:t}),!0!==a){var g=v();do{r(),f().validPositions[p]?(c=f().validPositions[p],o=c.match,u=c.locator.slice(),s(),d+=m[p]):(c=k(p,u,p-1),o=c.match,u=c.locator.slice(),(!1===l.jitMasking||p<g||"number"==typeof l.jitMasking&&isFinite(l.jitMasking)&&l.jitMasking>p)&&(s(),d+=D(p,o))),p++}while((q===n||p<q)&&(null!==o.fn||""!==o.def)||g>p||h);-1===d.indexOf("im-caret")&&r(!0),h&&s()}var b=K.getElementsByTagName("div")[0];b.innerHTML=d,e.inputmask.positionColorMask(e,b)}}r=r||this.maskset,l=l||this.opts;var V,U,q,K,Y=this,Q=this.el,W=this.isRTL,$=!1,z=!1,Z=!1,X=!1,J={on:function(t,i,s){var r=function(t){if(this.inputmask===n&&"FORM"!==this.nodeName){var i=e.data(this,"_inputmask_opts");i?new a(i).mask(this):J.off(this)}else{if("setvalue"===t.type||"FORM"===this.nodeName||!(this.disabled||this.readOnly&&!("keydown"===t.type&&t.ctrlKey&&67===t.keyCode||!1===l.tabThrough&&t.keyCode===a.keyCode.TAB))){switch(t.type){case"input":if(!0===z)return z=!1,t.preventDefault();break;case"keydown":$=!1,z=!1;break;case"keypress":if(!0===$)return t.preventDefault();$=!0;break;case"click":if(u||d){var r=this,o=arguments;return setTimeout(function(){s.apply(r,o)},0),!1}}var c=s.apply(this,arguments);return!1===c&&(t.preventDefault(),t.stopPropagation()),c}t.preventDefault()}};t.inputmask.events[i]=t.inputmask.events[i]||[],t.inputmask.events[i].push(r),-1!==e.inArray(i,["submit","reset"])?null!==t.form&&e(t.form).on(i,r):e(t).on(i,r)},off:function(t,i){if(t.inputmask&&t.inputmask.events){var n;i?(n=[])[i]=t.inputmask.events[i]:n=t.inputmask.events,e.each(n,function(i,n){for(;n.length>0;){var a=n.pop();-1!==e.inArray(i,["submit","reset"])?null!==t.form&&e(t.form).off(i,a):e(t).off(i,a)}delete t.inputmask.events[i]})}}},ee={keydownEvent:function(t){var n=this,s=e(n),r=t.keyCode,o=M(n);if(r===a.keyCode.BACKSPACE||r===a.keyCode.DELETE||d&&r===a.keyCode.BACKSPACE_SAFARI||t.ctrlKey&&r===a.keyCode.X&&!function(e){var t=i.createElement("input"),n="oncut"in t;return n||(t.setAttribute("oncut","return;"),n="function"==typeof t.oncut),t=null,n}())t.preventDefault(),H(n,r,o),O(n,C(!0),f().p,t,n.inputmask._valueGet()!==C().join("")),n.inputmask._valueGet()===x().join("")?s.trigger("cleared"):!0===j(C())&&s.trigger("complete");else if(r===a.keyCode.END||r===a.keyCode.PAGE_DOWN){t.preventDefault();var c=L(v());l.insertMode||c!==f().maskLength||t.shiftKey||c--,M(n,t.shiftKey?o.begin:c,c,!0)}else r===a.keyCode.HOME&&!t.shiftKey||r===a.keyCode.PAGE_UP?(t.preventDefault(),M(n,0,t.shiftKey?o.begin:0,!0)):(l.undoOnEscape&&r===a.keyCode.ESCAPE||90===r&&t.ctrlKey)&&!0!==t.altKey?(T(n,!0,!1,V.split("")),s.trigger("click")):r!==a.keyCode.INSERT||t.shiftKey||t.ctrlKey?!0===l.tabThrough&&r===a.keyCode.TAB?(!0===t.shiftKey?(null===y(o.begin).match.fn&&(o.begin=L(o.begin)),o.end=A(o.begin,!0),o.begin=A(o.end,!0)):(o.begin=L(o.begin,!0),o.end=L(o.begin,!0),o.end<f().maskLength&&o.end--),o.begin<f().maskLength&&(t.preventDefault(),M(n,o.begin,o.end))):t.shiftKey||!1===l.insertMode&&(r===a.keyCode.RIGHT?setTimeout(function(){var e=M(n);M(n,e.begin)},0):r===a.keyCode.LEFT&&setTimeout(function(){var e=M(n);M(n,W?e.begin+1:e.begin-1)},0)):(l.insertMode=!l.insertMode,M(n,l.insertMode||o.begin!==f().maskLength?o.begin:o.begin-1));l.onKeyDown.call(this,t,C(),M(n).begin,l),Z=-1!==e.inArray(r,l.ignorables)},keypressEvent:function(t,i,s,r,o){var c=this,u=e(c),d=t.which||t.charCode||t.keyCode;if(!(!0===i||t.ctrlKey&&t.altKey)&&(t.ctrlKey||t.metaKey||Z))return d===a.keyCode.ENTER&&V!==C().join("")&&(V=C().join(""),setTimeout(function(){u.trigger("change")},0)),!0;if(d){46===d&&!1===t.shiftKey&&""!==l.radixPoint&&(d=l.radixPoint.charCodeAt(0));var h,p=i?{begin:o,end:o}:M(c),v=String.fromCharCode(d);f().writeOutBuffer=!0;var g=_(p,v,r);if(!1!==g&&(m(!0),h=g.caret!==n?g.caret:i?g.pos+1:L(g.pos),f().p=h),!1!==s&&(setTimeout(function(){l.onKeyValidation.call(c,d,g,l)},0),f().writeOutBuffer&&!1!==g)){var b=C();O(c,b,l.numericInput&&g.caret===n?A(h):h,t,!0!==i),!0!==i&&setTimeout(function(){!0===j(b)&&u.trigger("complete")},0)}if(t.preventDefault(),i)return!1!==g&&(g.forwardPosition=h),g}},pasteEvent:function(i){var n,a=i.originalEvent||i,s=e(this),r=this.inputmask._valueGet(!0),o=M(this);W&&(n=o.end,o.end=o.begin,o.begin=n);var c=r.substr(0,o.begin),u=r.substr(o.end,r.length);if(c===(W?x().reverse():x()).slice(0,o.begin).join("")&&(c=""),u===(W?x().reverse():x()).slice(o.end).join("")&&(u=""),W&&(n=c,c=u,u=n),t.clipboardData&&t.clipboardData.getData)r=c+t.clipboardData.getData("Text")+u;else{if(!a.clipboardData||!a.clipboardData.getData)return!0;r=c+a.clipboardData.getData("text/plain")+u}var d=r;if(e.isFunction(l.onBeforePaste)){if(!1===(d=l.onBeforePaste.call(Y,r,l)))return i.preventDefault();d||(d=r)}return T(this,!1,!1,W?d.split("").reverse():d.toString().split("")),O(this,C(),L(v()),i,V!==C().join("")),!0===j(C())&&s.trigger("complete"),i.preventDefault()},inputFallBackEvent:function(t){var i=this,n=i.inputmask._valueGet();if(C().join("")!==n){var s=M(i);if(!1===function(t,i,n){if("."===i.charAt(n.begin-1)&&""!==l.radixPoint&&((i=i.split(""))[n.begin-1]=l.radixPoint.charAt(0),i=i.join("")),i.charAt(n.begin-1)===l.radixPoint&&i.length>C().length){var a=new e.Event("keypress");return a.which=l.radixPoint.charCodeAt(0),ee.keypressEvent.call(t,a,!0,!0,!1,n.begin-1),!1}}(i,n,s))return!1;if(n=n.replace(new RegExp("("+a.escapeRegex(x().join(""))+")*"),""),!1===function(t,i,a){if(u){var s=n.replace(C().join(""),"");if(1===s.length){var r=new e.Event("keypress");return r.which=s.charCodeAt(0),ee.keypressEvent.call(t,r,!0,!0,!1,f().validPositions[a.begin-1]?a.begin:a.begin-1),!1}}}(i,0,s))return!1;s.begin>n.length&&(M(i,n.length),s=M(i));var r=C().join(""),o=n.substr(0,s.begin),c=n.substr(s.begin),d=r.substr(0,s.begin),h=r.substr(s.begin),p=s,m="",v=!1;if(o!==d){p.begin=0;for(var g=(v=o.length>=d.length)?o.length:d.length,b=0;o.charAt(b)===d.charAt(b)&&b<g;b++)p.begin++;v&&(m+=o.slice(p.begin,p.end))}c!==h&&(c.length>h.length?v&&(p.end=p.begin):c.length<h.length?p.end+=h.length-c.length:c.charAt(0)!==h.charAt(0)&&p.end++),O(i,C(),p),m.length>0?e.each(m.split(""),function(t,n){var a=new e.Event("keypress");a.which=n.charCodeAt(0),Z=!1,ee.keypressEvent.call(i,a)}):(p.begin===p.end-1&&M(i,A(p.begin+1),p.end),t.keyCode=a.keyCode.DELETE,ee.keydownEvent.call(i,t)),t.preventDefault()}},setValueEvent:function(t){this.inputmask.refreshValue=!1;var i=this.inputmask._valueGet(!0);e.isFunction(l.onBeforeMask)&&(i=l.onBeforeMask.call(Y,i,l)||i),i=i.split(""),T(this,!0,!1,W?i.reverse():i),V=C().join(""),(l.clearMaskOnLostFocus||l.clearIncomplete)&&this.inputmask._valueGet()===x().join("")&&this.inputmask._valueSet("")},focusEvent:function(e){var t=this.inputmask._valueGet();l.showMaskOnFocus&&(!l.showMaskOnHover||l.showMaskOnHover&&""===t)&&(this.inputmask._valueGet()!==C().join("")?O(this,C(),L(v())):!1===X&&M(this,L(v()))),!0===l.positionCaretOnTab&&!1===X&&""!==t&&(O(this,C(),M(this)),ee.clickEvent.apply(this,[e,!0])),V=C().join("")},mouseleaveEvent:function(e){if(X=!1,l.clearMaskOnLostFocus&&i.activeElement!==this){var t=C().slice(),n=this.inputmask._valueGet();n!==this.getAttribute("placeholder")&&""!==n&&(-1===v()&&n===x().join("")?t=[]:F(t),O(this,t))}},clickEvent:function(t,a){var s=this;setTimeout(function(){if(i.activeElement===s){var t=M(s);if(a&&(W?t.end=t.begin:t.begin=t.end),t.begin===t.end)switch(l.positionCaretOnClick){case"none":break;case"radixFocus":if(function(t){if(""!==l.radixPoint){var i=f().validPositions;if(i[t]===n||i[t].input===D(t)){if(t<L(-1))return!0;var a=e.inArray(l.radixPoint,C());if(-1!==a){for(var s in i)if(a<s&&i[s].input!==D(s))return!1;return!0}}}return!1}(t.begin)){var r=C().join("").indexOf(l.radixPoint);M(s,l.numericInput?L(r):r);break}default:var o=t.begin,c=v(o,!0),u=L(c);if(o<u)M(s,S(o,!0)||S(o-1,!0)?o:L(o));else{var d=f().validPositions[c],h=k(u,d?d.match.locator:n,d),p=D(u,h.match);if(""!==p&&C()[u]!==p&&!0!==h.match.optionalQuantifier&&!0!==h.match.newBlockMarker||!S(u,!0)&&h.match.def===p){var m=L(u);(o>=m||o===u)&&(u=m)}M(s,u)}}}},0)},dblclickEvent:function(e){var t=this;setTimeout(function(){M(t,0,L(v()))},0)},cutEvent:function(n){var s=e(this),r=M(this),o=n.originalEvent||n,l=t.clipboardData||o.clipboardData,c=W?C().slice(r.end,r.begin):C().slice(r.begin,r.end);l.setData("text",W?c.reverse().join(""):c.join("")),i.execCommand&&i.execCommand("copy"),H(this,a.keyCode.DELETE,r),O(this,C(),f().p,n,V!==C().join("")),this.inputmask._valueGet()===x().join("")&&s.trigger("cleared")},blurEvent:function(t){var i=e(this);if(this.inputmask){var a=this.inputmask._valueGet(),s=C().slice();""!==a&&(l.clearMaskOnLostFocus&&(-1===v()&&a===x().join("")?s=[]:F(s)),!1===j(s)&&(setTimeout(function(){i.trigger("incomplete")},0),l.clearIncomplete&&(m(),s=l.clearMaskOnLostFocus?[]:x().slice())),O(this,s,n,t)),V!==C().join("")&&(V=s.join(""),i.trigger("change"))}},mouseenterEvent:function(e){X=!0,i.activeElement!==this&&l.showMaskOnHover&&this.inputmask._valueGet()!==C().join("")&&O(this,C())},submitEvent:function(e){V!==C().join("")&&U.trigger("change"),l.clearMaskOnLostFocus&&-1===v()&&Q.inputmask._valueGet&&Q.inputmask._valueGet()===x().join("")&&Q.inputmask._valueSet(""),l.removeMaskOnSubmit&&(Q.inputmask._valueSet(Q.inputmask.unmaskedvalue(),!0),setTimeout(function(){O(Q,C())},0))},resetEvent:function(e){Q.inputmask.refreshValue=!0,setTimeout(function(){U.trigger("setvalue")},0)}};a.prototype.positionColorMask=function(e,t){e.style.left=t.offsetLeft+"px"};var te;if(s!==n)switch(s.action){case"isComplete":return Q=s.el,j(C());case"unmaskedvalue":return Q!==n&&s.value===n||(te=s.value,te=(e.isFunction(l.onBeforeMask)?l.onBeforeMask.call(Y,te,l)||te:te).split(""),T(n,!1,!1,W?te.reverse():te),e.isFunction(l.onBeforeWrite)&&l.onBeforeWrite.call(Y,n,C(),0,l)),R(Q);case"mask":!function(t){J.off(t);var a=function(t,a){var s=t.getAttribute("type"),r="INPUT"===t.tagName&&-1!==e.inArray(s,a.supportsInputType)||t.isContentEditable||"TEXTAREA"===t.tagName;if(!r)if("INPUT"===t.tagName){var o=i.createElement("input");o.setAttribute("type",s),r="text"===o.type,o=null}else r="partial";return!1!==r?function(t){function s(){return this.inputmask?this.inputmask.opts.autoUnmask?this.inputmask.unmaskedvalue():-1!==v()||!0!==a.nullable?i.activeElement===this&&a.clearMaskOnLostFocus?(W?F(C().slice()).reverse():F(C().slice())).join(""):o.call(this):"":o.call(this)}function r(t){l.call(this,t),this.inputmask&&e(this).trigger("setvalue")}var o,l;if(!t.inputmask.__valueGet){if(!0!==a.noValuePatching){if(Object.getOwnPropertyDescriptor){"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==_typeof("test".__proto__)?function(e){return e.__proto__}:function(e){return e.constructor.prototype});var c=Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t),"value"):n;c&&c.get&&c.set?(o=c.get,l=c.set,Object.defineProperty(t,"value",{get:s,set:r,configurable:!0})):"INPUT"!==t.tagName&&(o=function(){return this.textContent},l=function(e){this.textContent=e},Object.defineProperty(t,"value",{get:s,set:r,configurable:!0}))}else i.__lookupGetter__&&t.__lookupGetter__("value")&&(o=t.__lookupGetter__("value"),l=t.__lookupSetter__("value"),t.__defineGetter__("value",s),t.__defineSetter__("value",r));t.inputmask.__valueGet=o,t.inputmask.__valueSet=l}t.inputmask._valueGet=function(e){return W&&!0!==e?o.call(this.el).split("").reverse().join(""):o.call(this.el)},t.inputmask._valueSet=function(e,t){l.call(this.el,null===e||e===n?"":!0!==t&&W?e.split("").reverse().join(""):e)},o===n&&(o=function(){return this.value},l=function(e){this.value=e},function(t){if(e.valHooks&&(e.valHooks[t]===n||!0!==e.valHooks[t].inputmaskpatch)){var i=e.valHooks[t]&&e.valHooks[t].get?e.valHooks[t].get:function(e){return e.value},s=e.valHooks[t]&&e.valHooks[t].set?e.valHooks[t].set:function(e,t){return e.value=t,e};e.valHooks[t]={get:function(e){if(e.inputmask){if(e.inputmask.opts.autoUnmask)return e.inputmask.unmaskedvalue();var t=i(e);return-1!==v(n,n,e.inputmask.maskset.validPositions)||!0!==a.nullable?t:""}return i(e)},set:function(t,i){var n,a=e(t);return n=s(t,i),t.inputmask&&a.trigger("setvalue"),n},inputmaskpatch:!0}}}(t.type),function(t){J.on(t,"mouseenter",function(t){var i=e(this);this.inputmask._valueGet()!==C().join("")&&i.trigger("setvalue")})}(t))}}(t):t.inputmask=n,r}(t,l);if(!1!==a&&(Q=t,U=e(Q),-1===(q=Q!==n?Q.maxLength:n)&&(q=n),!0===l.colorMask&&B(Q),h&&(Q.hasOwnProperty("inputmode")&&(Q.inputmode=l.inputmode,Q.setAttribute("inputmode",l.inputmode)),"rtfm"===l.androidHack&&(!0!==l.colorMask&&B(Q),Q.type="password")),!0===a&&(J.on(Q,"submit",ee.submitEvent),J.on(Q,"reset",ee.resetEvent),J.on(Q,"mouseenter",ee.mouseenterEvent),J.on(Q,"blur",ee.blurEvent),J.on(Q,"focus",ee.focusEvent),J.on(Q,"mouseleave",ee.mouseleaveEvent),!0!==l.colorMask&&J.on(Q,"click",ee.clickEvent),J.on(Q,"dblclick",ee.dblclickEvent),J.on(Q,"paste",ee.pasteEvent),J.on(Q,"dragdrop",ee.pasteEvent),J.on(Q,"drop",ee.pasteEvent),J.on(Q,"cut",ee.cutEvent),J.on(Q,"complete",l.oncomplete),J.on(Q,"incomplete",l.onincomplete),J.on(Q,"cleared",l.oncleared),h||!0===l.inputEventOnly?Q.removeAttribute("maxLength"):(J.on(Q,"keydown",ee.keydownEvent),J.on(Q,"keypress",ee.keypressEvent)),J.on(Q,"compositionstart",e.noop),J.on(Q,"compositionupdate",e.noop),J.on(Q,"compositionend",e.noop),J.on(Q,"keyup",e.noop),J.on(Q,"input",ee.inputFallBackEvent),J.on(Q,"beforeinput",e.noop)),J.on(Q,"setvalue",ee.setValueEvent),V=x().join(""),""!==Q.inputmask._valueGet(!0)||!1===l.clearMaskOnLostFocus||i.activeElement===Q)){var s=e.isFunction(l.onBeforeMask)?l.onBeforeMask.call(Y,Q.inputmask._valueGet(!0),l)||Q.inputmask._valueGet(!0):Q.inputmask._valueGet(!0);""!==s&&T(Q,!0,!1,W?s.split("").reverse():s.split(""));var r=C().slice();V=r.join(""),!1===j(r)&&l.clearIncomplete&&m(),l.clearMaskOnLostFocus&&i.activeElement!==Q&&(-1===v()?r=[]:F(r)),O(Q,r),i.activeElement===Q&&M(Q,L(v()))}}(Q);break;case"format":return te=(e.isFunction(l.onBeforeMask)?l.onBeforeMask.call(Y,s.value,l)||s.value:s.value).split(""),T(n,!0,!1,W?te.reverse():te),s.metadata?{value:W?C().slice().reverse().join(""):C().join(""),metadata:o.call(this,{action:"getmetadata"},r,l)}:W?C().slice().reverse().join(""):C().join("");case"isValid":s.value?(te=s.value.split(""),T(n,!0,!0,W?te.reverse():te)):s.value=C().join("");for(var ie=C(),ne=N(),ae=ie.length-1;ae>ne&&!S(ae);ae--);return ie.splice(ne,ae+1-ne),j(ie)&&s.value===C().join("");case"getemptymask":return x().join("");case"remove":return Q&&Q.inputmask&&(U=e(Q),Q.inputmask._valueSet(l.autoUnmask?R(Q):Q.inputmask._valueGet(!0)),J.off(Q),Object.getOwnPropertyDescriptor&&Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Q),"value")&&Q.inputmask.__valueGet&&Object.defineProperty(Q,"value",{get:Q.inputmask.__valueGet,set:Q.inputmask.__valueSet,configurable:!0}):i.__lookupGetter__&&Q.__lookupGetter__("value")&&Q.inputmask.__valueGet&&(Q.__defineGetter__("value",Q.inputmask.__valueGet),Q.__defineSetter__("value",Q.inputmask.__valueSet)),Q.inputmask=n),Q;case"getmetadata":if(e.isArray(r.metadata)){var se=p(!0,0,!1).join("");return e.each(r.metadata,function(e,t){if(t.mask===se)return se=t,!1}),se}return r.metadata}}var l=navigator.userAgent,c=/mobile/i.test(l),u=/iemobile/i.test(l),d=/iphone/i.test(l)&&!u,h=/android/i.test(l)&&!u;return a.prototype={dataAttribute:"data-inputmask",defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:null,regex:null,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,alias:null,onKeyDown:e.noop,onBeforeMask:null,onBeforePaste:function(t,i){return e.isFunction(i.onBeforeMask)?i.onBeforeMask.call(this,t,i):t},onBeforeWrite:null,onUnMask:null,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:e.noop,skipOptionalPartCharacter:" ",numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",radixPointDefinitionSymbol:n,groupSeparator:"",keepStatic:null,positionCaretOnTab:!0,tabThrough:!1,supportsInputType:["text","tel","password"],ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123,0,229],isComplete:null,canClearPosition:e.noop,preValidation:null,postValidation:null,staticDefinitionSymbol:n,jitMasking:!1,nullable:!0,inputEventOnly:!1,noValuePatching:!1,positionCaretOnClick:"lvp",casing:null,inputmode:"verbatim",colorMask:!1,androidHack:!1,importDataAttributes:!0},definitions:{9:{validator:"[0-9１-９]",cardinality:1,definitionSymbol:"*"},a:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[0-9１-９A-Za-zА-яЁёÀ-ÿµ]",cardinality:1}},aliases:{},masksCache:{},mask:function(l){var c=this;return"string"==typeof l&&(l=i.getElementById(l)||i.querySelectorAll(l)),l=l.nodeName?[l]:l,e.each(l,function(i,l){var u=e.extend(!0,{},c.opts);!function(i,a,r,o){function l(e,a){null!==(a=a!==n?a:i.getAttribute(o+"-"+e))&&("string"==typeof a&&(0===e.indexOf("on")?a=t[a]:"false"===a?a=!1:"true"===a&&(a=!0)),r[e]=a)}if(!0===a.importDataAttributes){var c,u,d,h,p=i.getAttribute(o);if(p&&""!==p&&(p=p.replace(new RegExp("'","g"),'"'),u=JSON.parse("{"+p+"}")),u){d=n;for(h in u)if("alias"===h.toLowerCase()){d=u[h];break}}l("alias",d),r.alias&&s(r.alias,r,a);for(c in a){if(u){d=n;for(h in u)if(h.toLowerCase()===c.toLowerCase()){d=u[h];break}}l(c,d)}}e.extend(!0,a,r),("rtl"===i.dir||a.rightAlign)&&(i.style.textAlign="right"),("rtl"===i.dir||a.numericInput)&&(i.dir="ltr",i.removeAttribute("dir"),a.isRTL=!0)}(l,u,e.extend(!0,{},c.userOptions),c.dataAttribute);var d=r(u,c.noMasksCache);d!==n&&(l.inputmask!==n&&(l.inputmask.opts.autoUnmask=!0,l.inputmask.remove()),l.inputmask=new a(n,n,!0),l.inputmask.opts=u,l.inputmask.noMasksCache=c.noMasksCache,l.inputmask.userOptions=e.extend(!0,{},c.userOptions),l.inputmask.isRTL=u.isRTL||u.numericInput,l.inputmask.el=l,l.inputmask.maskset=d,e.data(l,"_inputmask_opts",u),o.call(l.inputmask,{action:"mask"}))}),l&&l[0]?l[0].inputmask||this:this},option:function(t,i){return"string"==typeof t?this.opts[t]:"object"==(void 0===t?"undefined":_typeof(t))?(e.extend(this.userOptions,t),this.el&&!0!==i&&this.mask(this.el),this):void 0},unmaskedvalue:function(e){return this.maskset=this.maskset||r(this.opts,this.noMasksCache),o.call(this,{action:"unmaskedvalue",value:e})},remove:function(){return o.call(this,{action:"remove"})},getemptymask:function(){return this.maskset=this.maskset||r(this.opts,this.noMasksCache),o.call(this,{action:"getemptymask"})},hasMaskedValue:function(){return!this.opts.autoUnmask},isComplete:function(){return this.maskset=this.maskset||r(this.opts,this.noMasksCache),o.call(this,{action:"isComplete"})},getmetadata:function(){return this.maskset=this.maskset||r(this.opts,this.noMasksCache),o.call(this,{action:"getmetadata"})},isValid:function(e){return this.maskset=this.maskset||r(this.opts,this.noMasksCache),o.call(this,{action:"isValid",value:e})},format:function(e,t){return this.maskset=this.maskset||r(this.opts,this.noMasksCache),o.call(this,{action:"format",value:e,metadata:t})},analyseMask:function(t,i,s){function r(e,t,i,n){this.matches=[],this.openGroup=e||!1,this.alternatorGroup=!1,this.isGroup=e||!1,this.isOptional=t||!1,this.isQuantifier=i||!1,this.isAlternator=n||!1,this.quantifier={min:1,max:1}}function o(t,r,o){o=o!==n?o:t.matches.length;var l=t.matches[o-1];if(i)0===r.indexOf("[")||y&&/\\d|\\s|\\w]/i.test(r)||"."===r?t.matches.splice(o++,0,{fn:new RegExp(r,s.casing?"i":""),cardinality:1,optionality:t.isOptional,newBlockMarker:l===n||l.def!==r,casing:null,def:r,placeholder:n,nativeDef:r}):(y&&(r=r[r.length-1]),e.each(r.split(""),function(e,i){l=t.matches[o-1],t.matches.splice(o++,0,{fn:null,cardinality:0,optionality:t.isOptional,newBlockMarker:l===n||l.def!==i&&null!==l.fn,casing:null,def:s.staticDefinitionSymbol||i,placeholder:s.staticDefinitionSymbol!==n?i:n,nativeDef:i})})),y=!1;else{var c=(s.definitions?s.definitions[r]:n)||a.prototype.definitions[r];if(c&&!y){for(var u=c.prevalidator,d=u?u.length:0,h=1;h<c.cardinality;h++){var p=d>=h?u[h-1]:[],f=p.validator,m=p.cardinality;t.matches.splice(o++,0,{fn:f?"string"==typeof f?new RegExp(f,s.casing?"i":""):new function(){this.test=f}:new RegExp("."),cardinality:m||1,optionality:t.isOptional,newBlockMarker:l===n||l.def!==(c.definitionSymbol||r),casing:c.casing,def:c.definitionSymbol||r,placeholder:c.placeholder,nativeDef:r}),l=t.matches[o-1]}t.matches.splice(o++,0,{fn:c.validator?"string"==typeof c.validator?new RegExp(c.validator,s.casing?"i":""):new function(){this.test=c.validator}:new RegExp("."),cardinality:c.cardinality,optionality:t.isOptional,newBlockMarker:l===n||l.def!==(c.definitionSymbol||r),casing:c.casing,def:c.definitionSymbol||r,placeholder:c.placeholder,nativeDef:r})}else t.matches.splice(o++,0,{fn:null,cardinality:0,optionality:t.isOptional,newBlockMarker:l===n||l.def!==r&&null!==l.fn,casing:null,def:s.staticDefinitionSymbol||r,placeholder:s.staticDefinitionSymbol!==n?r:n,nativeDef:r}),y=!1}}function l(t){t&&t.matches&&e.each(t.matches,function(e,a){var r=t.matches[e+1];(r===n||r.matches===n||!1===r.isQuantifier)&&a&&a.isGroup&&(a.isGroup=!1,i||(o(a,s.groupmarker.start,0),!0!==a.openGroup&&o(a,s.groupmarker.end))),l(a)})}function c(){if(I.length>0){if(f=I[I.length-1],o(f,h),f.isAlternator){m=I.pop();for(var e=0;e<m.matches.length;e++)m.matches[e].isGroup=!1;I.length>0?(f=I[I.length-1]).matches.push(m):E.matches.push(m)}}else o(E,h)}function u(e){e.matches=e.matches.reverse();for(var t in e.matches)if(e.matches.hasOwnProperty(t)){var i=parseInt(t);if(e.matches[t].isQuantifier&&e.matches[i+1]&&e.matches[i+1].isGroup){var a=e.matches[t];e.matches.splice(t,1),e.matches.splice(i+1,0,a)}e.matches[t].matches!==n?e.matches[t]=u(e.matches[t]):e.matches[t]=function(e){return e===s.optionalmarker.start?e=s.optionalmarker.end:e===s.optionalmarker.end?e=s.optionalmarker.start:e===s.groupmarker.start?e=s.groupmarker.end:e===s.groupmarker.end&&(e=s.groupmarker.start),e}(e.matches[t])}return e}var d,h,p,f,m,v,g,b=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})|[^.?*+^${[]()|\\]+|./g,k=/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,y=!1,E=new r,I=[],x=[];for(i&&(s.optionalmarker.start=n,s.optionalmarker.end=n);d=i?k.exec(t):b.exec(t);){if(h=d[0],i)switch(h.charAt(0)){case"?":h="{0,1}";break;case"+":case"*":h="{"+h+"}"}if(y)c();else switch(h.charAt(0)){case s.escapeChar:y=!0,i&&c();break;case s.optionalmarker.end:case s.groupmarker.end:if(p=I.pop(),p.openGroup=!1,p!==n)if(I.length>0){if((f=I[I.length-1]).matches.push(p),f.isAlternator){m=I.pop();for(var C=0;C<m.matches.length;C++)m.matches[C].isGroup=!1,m.matches[C].alternatorGroup=!1;I.length>0?(f=I[I.length-1]).matches.push(m):E.matches.push(m)}}else E.matches.push(p);else c();break;case s.optionalmarker.start:I.push(new r(!1,!0));break;case s.groupmarker.start:I.push(new r(!0));break;case s.quantifiermarker.start:var P=new r(!1,!1,!0),w=(h=h.replace(/[{}]/g,"")).split(","),_=isNaN(w[0])?w[0]:parseInt(w[0]),S=1===w.length?_:isNaN(w[1])?w[1]:parseInt(w[1]);if("*"!==S&&"+"!==S||(_="*"===S?0:1),P.quantifier={min:_,max:S},I.length>0){var L=I[I.length-1].matches;(d=L.pop()).isGroup||((g=new r(!0)).matches.push(d),d=g),L.push(d),L.push(P)}else(d=E.matches.pop()).isGroup||(i&&null===d.fn&&"."===d.def&&(d.fn=new RegExp(d.def,s.casing?"i":"")),(g=new r(!0)).matches.push(d),d=g),E.matches.push(d),E.matches.push(P);break;case s.alternatormarker:if(I.length>0){var A=(f=I[I.length-1]).matches[f.matches.length-1];v=f.openGroup&&(A.matches===n||!1===A.isGroup&&!1===A.isAlternator)?I.pop():f.matches.pop()}else v=E.matches.pop();if(v.isAlternator)I.push(v);else if(v.alternatorGroup?(m=I.pop(),v.alternatorGroup=!1):m=new r(!1,!1,!1,!0),m.matches.push(v),I.push(m),v.openGroup){v.openGroup=!1;var O=new r(!0);O.alternatorGroup=!0,I.push(O)}break;default:c()}}for(;I.length>0;)p=I.pop(),E.matches.push(p);return E.matches.length>0&&(l(E),x.push(E)),(s.numericInput||s.isRTL)&&u(x[0]),x}},a.extendDefaults=function(t){e.extend(!0,a.prototype.defaults,t)},a.extendDefinitions=function(t){e.extend(!0,a.prototype.definitions,t)},a.extendAliases=function(t){e.extend(!0,a.prototype.aliases,t)},a.format=function(e,t,i){return a(t).format(e,i)},a.unmask=function(e,t){return a(t).unmaskedvalue(e)},a.isValid=function(e,t){return a(t).isValid(e)},a.remove=function(t){e.each(t,function(e,t){t.inputmask&&t.inputmask.remove()})},a.escapeRegex=function(e){return e.replace(new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"].join("|\\")+")","gim"),"\\$1")},a.keyCode={ALT:18,BACKSPACE:8,BACKSPACE_SAFARI:127,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91,X:88},a})},function(e,t,i){i(0);var n=i(1),a={ERROR_LABEL:"error-label",INVALID_REQ_FIELD:"invalid",MD_MENU:"md-select",MENU:"md-select-menu",MENU_OPEN:"active",LIST_ITEM:"md-select-menu-item",LIST_ITEM_HOVER:"keyover",REQUIRED_FIELD:"req",SEARCHBAR:"md-select-searchbar"};String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e});var s=function(){function e(t){_classCallCheck(this,e),"ontouchstart"in document.documentElement&&window.matchMedia&&window.matchMedia("(max-width:1024px)").matches||(this.select=t,this.select.classList.add(a.MD_MENU),this.container=this.select.parentNode,this.label=this.container.querySelector("label"),this.menu=null,this.searchBar=null,this.searchString="",this.multiple=this.select.multiple,this.hasSearch=this.select.hasAttribute("data-search"),this.open=!1,this.currentIndex=0,this.listItems=[],this.createMenu=this.createMenu.bind(this),this.setMenuPosition=this.setMenuPosition.bind(this),this.showMenu=this.showMenu.bind(this),this.hideMenu=this.hideMenu.bind(this),this.changeHandler=this.changeHandler.bind(this),this.focusHanlder=this.focusHanlder.bind(this),this.blurHandler=this.blurHandler.bind(this),this.keyDownHandler=this.keyDownHandler.bind(this),this.bodyClickHandler=this.bodyClickHandler.bind(this),this.checkIfRequired=this.checkIfRequired.bind(this),this.select.Select=this,this.createMenu(),this.addEventListeners())}return _createClass(e,[{key:"addEventListeners",value:function(){this.selectPlaceholder.addEventListener("click",this.focusHanlder,!1)}},{key:"setChangeEvent",value:function(e){this.onChange=e}},{key:"createMenu",value:function(){var e=this.select.children,t=e.length,i=void 0,n=void 0,s=void 0;for(this.menu=document.createElement("ul"),this.menu.classList.add(a.MENU),this.searchBar=document.createElement("div"),this.searchBar.setAttribute("contenteditable","true"),this.searchBar.classList.add(a.SEARCHBAR),i=0;i<t;i++)n=e[i],s=new r(n,i,this),this.listItems.push(s),this.menu.appendChild(s.listItem);this.select.selectedIndex>0&&"-1"!==this.listItems[0].dataVal&&this.select.classList.add("not-default"),document.body.appendChild(this.menu),this.hasSearch&&document.body.appendChild(this.searchBar),this.replaceSelect(),this.setMenuPosition()}},{key:"reloadMenu",value:function(){this.menu&&(this.menu.parentNode.removeChild(this.menu),this.listItems=[],this.createMenu())}},{key:"setMenuPosition",value:function(){var e=this.selectPlaceholder.getBoundingClientRect();this.menu.style.top=e.bottom+n.c()+"px",this.menu.style.left=e.left+"px",this.menu.style.width=this.selectPlaceholder.offsetWidth+"px",this.hasSearch&&(this.searchBar.style.top=e.top+n.c()+10+"px",this.searchBar.style.left=e.left+"px",this.searchBar.style.width=this.selectPlaceholder.offsetWidth-30+"px")}},{key:"replaceSelect",value:function(){if(this.select.classList.contains("hidden"))this.setPlaceholderText();else{var e=window.getComputedStyle(this.select).getPropertyValue("height"),t=window.getComputedStyle(this.select).getPropertyValue("width");this.selectPlaceholder=document.createElement("div");var i=document.createElement("span"),n=document.createElement("i");this.selectPlaceholder.appendChild(i),this.selectPlaceholder.appendChild(n),n.classList.add("material-icons"),n.innerHTML="arrow_drop_down",this.selectPlaceholder.style.width=t,this.selectPlaceholder.style.height=e,this.selectPlaceholder.style.lineHeight=e,this.selectPlaceholder.classList.add("select-placeholder"),this.select.parentNode.insertBefore(this.selectPlaceholder,this.select.parentNode.childNodes[0]),this.setPlaceholderText(),this.select.classList.add("hidden")}}},{key:"setPlaceholderText",value:function(){this.selectPlaceholder.querySelector("span").innerHTML=this.getTextValue()}},{key:"showMenu",value:function(){var e=this;document.Select&&(document.Select.hideMenu(),document.Select=null),this.menu.scrollTop=0,this.currentIndex=-1,this.menu.classList.add(a.MENU_OPEN),this.searchBar.classList.add(a.MENU_OPEN),this.searchString="",this.searchBar.innerHTML="",this.open=!0,setTimeout(function(){document.body.addEventListener("keydown",e.keyDownHandler,!1),document.body.addEventListener("click",e.bodyClickHandler,!1),e.select.blur();var t=e.menu.querySelector('li[selected="true"]');if(t){var i=e.menu.scrollTop,n=e.menu.offsetHeight;t.offsetTop+t.offsetHeight>i+n&&(e.menu.scrollTop=t.offsetTop)}e.setHighlighted(0),e.hasSearch&&e.searchBar.focus()},100),document.Select=this}},{key:"hideMenu",value:function(){var e=void 0;this.menu.classList.remove(a.MENU_OPEN),this.hasSearch&&this.searchBar.classList.remove(a.MENU_OPEN),this.open=!1,this.searchString="",(e=this.menu.querySelector("."+a.LIST_ITEM_HOVER))&&e.classList.remove(a.LIST_ITEM_HOVER),document.body.removeEventListener("keydown",this.keyDownHandler,!1),document.body.removeEventListener("click",this.bodyClickHandler,!1),this.filterList(),document.Select=null}},{key:"focusHanlder",value:function(e){this.open||(this.setMenuPosition(),this.showMenu())}},{key:"blurHandler",value:function(e){}},{key:"keyDownHandler",value:function(e){this.currentIndex;var t=-1;e&&e.keyCode&&(9===(t=e.keyCode)?(this.hideMenu(),this.select.focus()):40===t?(e.preventDefault(),this.setHighlighted(1)):38===t?(e.preventDefault(),this.setHighlighted(-1)):13===t?(e.preventDefault(),-1===this.currentIndex&&(this.currentIndex=0),this.listItems[this.currentIndex].selectItem()):27===t?(e.preventDefault(),this.hideMenu()):this.hasSearch?(8===t?this.searchString=this.searchString.substr(0,this.searchString.length-1):1===e.key.length&&/^[a-zA-Z0-9 _]+$/.test(e.key)&&(this.searchString+=e.key),this.filterList()):e.preventDefault())}},{key:"filterList",value:function(){if(this.hasSearch&&this.listItems.length>0){var e=0,t=null,i=this.listItems[0].listItem.parentNode;i.classList.add("hidden");for(var n=0;n<this.listItems.length;n++){var a=this.listItems[n].listItem;a.innerText.toUpperCase().startsWith(this.searchString.toUpperCase())||"true"===a.getAttribute("selected")?(a.classList.remove("hidden"),e<2&&a.innerText.toUpperCase().startsWith(this.searchString.toUpperCase())&&(t=a,e+=1)):a.classList.add("hidden")}i.classList.remove("hidden"),1===e&&t.click()}}},{key:"setHighlighted",value:function(e){if(0===e)for(var t=0;t<this.listItems.length;t++){if("true"===this.listItems[t].listItem.getAttribute("selected")){this.currentIndex=t;break}}else for(var i=this.currentIndex+e;i<this.listItems.length&&i>=0;i+=e){var n=this.listItems[i].listItem;if(!n.classList.contains("hidden")){this.currentIndex>=0&&this.listItems[this.currentIndex].listItem.classList.remove(a.LIST_ITEM_HOVER),this.currentIndex=i,n.classList.add(a.LIST_ITEM_HOVER);var s=this.menu.scrollTop,r=this.menu.offsetHeight;e>0?n.offsetTop+n.offsetHeight>s+r&&(this.menu.scrollTop=s+n.offsetHeight):n.offsetTop<s&&(this.menu.scrollTop=s-n.offsetHeight);break}}}},{key:"changeHandler",value:function(e){this.setPlaceholderText(),this.onChange&&"function"==typeof this.onChange&&this.onChange()}},{key:"bodyClickHandler",value:function(e){e&&e.target&&(e.target===this.select||e.target.classList.contains(a.LIST_ITEM)||e.target.classList.contains("btn-ripple-container")||e.target.classList.contains("btn-ripple-element")||e.target.classList.contains("md-select-searchbar"))||this.hideMenu()}},{key:"checkForValue",value:function(){}},{key:"checkIfRequired",value:function(){var e=!0,t=this.menu.querySelector('[selected="true"]'),i=this.container.querySelector("."+a.ERROR_LABEL),n=void 0;return i&&this.container.removeChild(i),t&&"-1"!==t.getAttribute("data-val")||!this.select.classList.contains(a.REQUIRED_FIELD)?this.select.classList.remove(a.INVALID_REQ_FIELD):((n=document.createElement("span")).classList.add(a.ERROR_LABEL),n.textContent="Required field.",this.container.appendChild(n),this.select.classList.add(a.INVALID_REQ_FIELD),e=!1),e}},{key:"setValue",value:function(e){var t=this.menu.querySelector('[data-val="'+e+'"]'),i=0,n=this.listItems.length,a=null;if(t)for(i=0;i<n;i++)(a=this.listItems[i]).listItem===t&&(a.listItem.getAttribute("selected")||a.selectItem())}},{key:"getValue",value:function(){if(!this.multiple)return this.select.options[this.select.selectedIndex].value}},{key:"getTextValue",value:function(){if(!this.multiple)return this.select.selectedIndex>=0?this.select.options[this.select.selectedIndex].text:""}}]),e}();t.a=s;var r=function(){function e(t,i,n){return _classCallCheck(this,e),this.listItem=document.createElement("li"),this.select=n,this.index=i,this.isRequired=n.select.classList.contains("req"),this.dataVal=t.value,this.isDefault="-1"===t.value,this.listItem.classList.add(a.LIST_ITEM),this.listItem.classList.add("btn-ripple"),this.listItem.textContent=t.textContent,this.listItem.setAttribute("data-val",t.value),this.isDefault&&this.listItem.classList.add("default-item"),t.selected&&this.listItem.setAttribute("selected","true"),this.selectItem=this.selectItem.bind(this),this.addEventListeners(),this}return _createClass(e,[{key:"addEventListeners",value:function(){this.listItem.addEventListener("click",this.selectItem,!1)}},{key:"selectItem",value:function(e){var t=void 0;if("true"===this.listItem.getAttribute("selected"))if(this.isRequired)this.select.multiple||this.select.hideMenu();else{this.listItem.removeAttribute("selected"),this.select.multiple||(this.select.select.value="");var i=this.select.select.querySelector('option[value="-1"]');i&&(this.select.select.classList.remove("not-default"),i.setAttribute("selected","selected"),this.select.select.value="-1"),this.select.checkIfRequired()}else(t=this.select.menu.querySelector('[selected="true"]'))&&!this.select.multiple&&t.removeAttribute("selected"),this.listItem.setAttribute("selected","true"),this.select.multiple||(this.select.select.value=this.listItem.getAttribute("data-val"),this.select.checkIfRequired()),this.select.select.classList.remove(a.INVALID_REQ_FIELD),this.select.multiple||this.select.hideMenu();"-1"!==this.select.select.value&&this.select.select.classList.add("not-default"),this.select.changeHandler(),e&&e.stopPropagation()}}]),e}()}],[6]);